\chapter{集族与测度}
%@see: 《Real Analysis Modern Techniques and Their Applications Second Edition》（Folland） P19
在本章我们来学习测度论的基本概念.

确定平面区域的面积和空间区域的体积是几何学的经典问题.
对于区域边界是光滑曲线或曲面的情况，
积分学提供了一套令人满意的解决方案.
但是在处理具有复杂边界的区域时，积分学便束手无策了.
于是，我们希望，对于任意\(n\in\mathbb{N}\)，可以找到这么一个映射\(\mu\)，
它可以把\(\mathbb{R}^n\)的任一子集\(E\)映射为一个数\(\mu(E) \in [0,+\infty]\).
我们把这个数称为“\(E\)的\(n\)维\DefineConcept{测度}（measure）”.
当\(E\)的长度、面积或体积可以利用积分公式计算时，
我们希望积分值等于测度.
另外，映射\(\mu\)应该具有以下性质：\begin{enumerate}
	\item 如果\(E_1,E_2,\dotsc\)是互斥集序列，
	那么\[
		\mu(E_1 \cup E_2 \cup \dotsb)
		= \mu(E_1) + \mu(E_2) + \dotsb.
	\]

	\item 如果\(E\)与\(F\)全等，即\(E\)可以通过平移、旋转、镜像反转这三种变换得到\(F\)，
	那么\(\mu(E) = \mu(F)\).

	\item \(\mu(Q)=1\)，
	其中\(Q = \Set{ x\in\mathbb{R}^n \given 0\leq x_i<1\ (i=1,2,\dotsc,n) }\).
\end{enumerate}

\section{集族}
在测度论中，我们常把一个非空集合记为\(\Omega\)，
研究它的子集、子集族的性质.
我们知道，只要任取\(\mathcal{A} \in \Powerset\Powerset\Omega\)，
那么\(\mathcal{A}\)就成为\(\Omega\)的一个子集族.
我们把从自然数集\(\mathbb{N}\)到\(\mathcal{A}\)的映射
称为一个\DefineConcept{集合序列}，
简称\DefineConcept{集列}.

\subsection{单调集列}
\begin{definition}
%@see: 《测度论讲义（第三版）》（严加安） P2 1.1.4
%@see: 《实变函数论（第三版）》（周民强） P9 定义1.8
设\(\{A_n\}_{n\geq1}\)是集列.

若\[
	(\forall n\in\omega)
	[A_n \subseteq A_{n+1}],
\]
则称“\(\{A_n\}\)是\DefineConcept{单调增集列}”.

若\[
	(\forall n\in\omega)
	[A_n \supseteq A_{n+1}],
\]
则称“\(\{A_n\}\)是\DefineConcept{单调减集列}”.

我们将“单调增集列”与“单调减集列”统称为\DefineConcept{单调集列}.
\end{definition}

当我们把集合序列\(\{A_n\}_{n\geq1}\)看成映射时，
利用我们在\cref{section:集合论.指标集}所学的知识，
我们可以给出以下概念.
\begin{definition}
设\(\{A_n\}_{n\geq1}\)是集列.
定义：\begin{gather*}
	\bigcup_{k=n}^m A_k
	\defeq
	\bigcup_{n \leq k \leq m, k\in\mathbb{N}} A_k, \\
	\bigcup_{k=n}^\infty A_k
	\defeq
	\bigcup_{k \geq n, k\in\mathbb{N}} A_k, \\
	\bigcap_{k=n}^m A_k
	\defeq
	\bigcap_{n \leq k \leq m, k\in\mathbb{N}} A_k, \\
	\bigcap_{k=n}^\infty A_k
	\defeq
	\bigcap_{k \geq n, k\in\mathbb{N}} A_k.
\end{gather*}
\end{definition}

\begin{definition}
%@see: 《实变函数论（第三版）》（周民强） P9 定义1.8
设\(\{A_n\}_{n\geq1}\)是一个集列.
定义：\[
	\lim_{n\to\infty} A_n
	\defeq
	\left\{ \def\arraystretch{2} \begin{array}{cl}
		\bigcup_{n=1}^\infty A_n, & \text{$\{A_n\}$是单调增集列}, \\
		\bigcap_{n=1}^\infty A_n, & \text{$\{A_n\}$是单调减集列},
	\end{array} \right.
\]
称其为“\(\{A_n\}\)的\DefineConcept{极限}”.
\end{definition}

\begin{example}
%@see: 《实变函数论（第三版）》（周民强） P9 例5
设\(A_n = [n,+\infty)\ (n=1,2,\dotsc)\).
显然\(\{A_n\}\)是一个单调减集列，
容易得出\(\lim_{n\to\infty} A_n = \emptyset\).
\end{example}

\begin{example}
%@see: 《实变函数论（第三版）》（周民强） P9 例6
设函数族\(\{f_n\}_{n\geq1}\)满足
\begin{enumerate}
	\item 对\(\forall x\in\mathbb{R}\)，
	总有\(f_n(x) \leq f_{n+1}(x)\ (n=1,2,\dotsc)\)，
	\item 对\(\forall x\in\mathbb{R}\)，
	总有\(\lim_{n\to\infty} f_n(x) = f(x)\).
\end{enumerate}
给定\(t\in\mathbb{R}\)，
取集列\(\{E_n\}_{n\geq1}\)，使之满足\[
	E_n = \Set{ x\in\mathbb{R} \given f_n(x) > t }
	\quad(n=1,2,\dotsc).
\]
那么就有\[
	E_1 \subseteq E_2 \subseteq \dotsb \subseteq E_n \subseteq \dotsb,
\]
并且还有\[
	\lim_{n\to\infty} E_n
	= \bigcup_{n=1}^\infty \Set{ x\in\mathbb{R} \given f_n(x) > t }
	= \Set{ x\in\mathbb{R} \given f(x) > t }.
\]
\end{example}

\subsection{集列的极限}
\begin{definition}
%@see: 《测度论讲义（第三版）》（严加安） P2 1.1.4
设\(\{A_n\}_{n\geq1}\)是集列.

定义：\[
	\limsup_{n\to\infty} A_n
	\defeq
	\bigcap_{n=1}^\infty
	\bigcup_{k=n}^\infty
	A_k,
\]
称其为“\(\{A_n\}\)的\DefineConcept{上极限}”.

定义：\[
	\liminf_{n\to\infty} A_n
	\defeq
	\bigcup_{n=1}^\infty
	\bigcap_{k=n}^\infty
	A_k,
\]
称其为“\(\{A_n\}\)的\DefineConcept{下极限}”.
\end{definition}
容易看出，\(\limsup_{n\to\infty} A_n\)的任一元素属于无限多个\(A_n\)，
而\(\liminf_{n\to\infty} A_n\)的任一元素至多不属于有限多个\(A_n\).

\begin{example}
%@see: 《实变函数论（第三版）》（周民强） P10 例7
设\(E,F\)都是集合，
集列\(\{A_k\}_{k\geq1}\)满足\[
	A_k = \left\{ \begin{array}{cl}
		E, & \text{$k$是奇数}, \\
		F, & \text{$k$是偶数}
	\end{array} \right.
	\quad(k=1,2,\dotsc),
\]
从而我们有\[
	\limsup_{k\to\infty} A_k
	= E \cup F, \qquad
	\liminf_{k\to\infty} A_k
	= E \cap F.
\]
\end{example}

\begin{proposition}
%@see: 《实变函数论（第三版）》（周民强） P10
设\(E\)是集合，\(\{A_n\}_{n\geq1}\)是集列，
则\begin{gather}
	E - \limsup_{n\to\infty} A_n = \liminf_{n\to\infty} (E - A_n); \\
	E - \liminf_{n\to\infty} A_n = \limsup_{n\to\infty} (E - A_n).
\end{gather}
\end{proposition}

\begin{proposition}
%@see: 《测度论讲义（第三版）》（严加安） P2 1.1.4
设\(\{A_n\}_{n\geq1}\)是集列，
则\begin{equation}
	\liminf_{n\to\infty} A_n
	\subseteq
	\limsup_{n\to\infty} A_n.
\end{equation}
%@see: https://math.stackexchange.com/questions/107931/lim-sup-and-lim-inf-of-sequence-of-sets
\end{proposition}

\begin{theorem}
%@see: 《测度论讲义（第三版）》（严加安） P2 1.1.4
设\(\{A_n\}_{n\geq1}\)是一个集列.
如果\[
	\liminf_{n\to\infty} A_n
	= \limsup_{n\to\infty} A_n
	= A,
\]
则\(\lim_{n\to\infty} A_n = A\).
\end{theorem}

\begin{proposition}
%@see: 《实变函数论（第三版）》（周民强） P11 例8
设\(\{f_n(x)\}\)以及\(f(x)\)是定义在\(\mathbb{R}\)上的实值函数，
则使\(f_n(x)\)不收敛于\(f(x)\)的一切点\(x\)所形成的集合可表示为\[
	\bigcup_{k=1}^\infty
	\bigcap_{N=1}^\infty
	\bigcup_{n=N}^\infty
	\Set{
		x\in\mathbb{R}
		\given
		\abs{f_n(x) - f(x)} \geq \frac1k
	}.
\]
%TODO
\end{proposition}

\subsection{特征函数}
\begin{definition}
%@see: 《实变函数论（第三版）》（周民强） P13
设\(X\)是集合，
\(A \subseteq X\).
定义：\[
	\chi_A(x)
	\defeq
	\left\{ \begin{array}{cl}
		1, & x \in A, \\
		0, & x \in X - A.
	\end{array} \right.
\]
把\(\chi_A\)称为“定义在\(X\)上的\(A\)的\DefineConcept{特征函数}（characteristic function）”.
\end{definition}
由此可见，特征函数\(\chi_A\)在一定意义上可作为\(A\)本身的代表，
从而可以通过对它的研究来了解集合本身.

\begin{proposition}
设\(A,B\)都是集合，
则\[
	A \neq B \iff \chi_A \neq \chi_B.
\]
\end{proposition}

\begin{proposition}
设\(A,B\)都是集合，
则\[
	A \subseteq B
	\iff
	\chi_A(x) \leq \chi_B(x).
\]
\end{proposition}

\begin{proposition}
设\(A,B\)都是集合，
则\[
	\chi_{A \cup B}(x)
	= \chi_A(x) + \chi_B(x) - \chi_{A \cap B}(x).
\]
\end{proposition}

\begin{proposition}
设\(A,B\)都是集合，
则\[
	\chi_{A \cap B}(x)
	= \chi_A(x) \cdot \chi_B(x).
\]
\end{proposition}

\begin{proposition}
设\(A,B\)都是集合，
则\[
	\chi_{A - B}(x)
	= \chi_A(x) \cdot (1 - \chi_B(x)).
\]
\end{proposition}

\begin{proposition}
设\(A,B\)都是集合，
则\[
	\chi_{A \oplus B}(x)
	= \abs{\chi_A(x) - \chi_B(x)}.
\]
\end{proposition}

\begin{example}
%@see: 《实变函数论（第三版）》（周民强） P14 例1
设\(X\)是非空集合，
且\(f\colon \Powerset X \to \Powerset X\).
若\[
	(\forall A,B \in \Powerset X)
	[
		A \subseteq B
		\implies
		f\ImageOfSetUnderRelation{A} \subseteq f\ImageOfSetUnderRelation{B}
	],
\]
则\[
	(\exists T)
	[
		T \subseteq \Powerset X
		\implies
		f\ImageOfSetUnderRelation{T} = T
	].
\]
\begin{proof}
令\[
	S = \Set{ A \in \Powerset X \given A \subseteq f\ImageOfSetUnderRelation{A} },
	\qquad
	T = \bigcup_{A \in S} A,
\]
则有\(f\ImageOfSetUnderRelation{T} = T\).

因为\(A \in S\)，\(A \subseteq f\ImageOfSetUnderRelation{A}\)，
从而由\(A \subseteq T\)
可得\(f\ImageOfSetUnderRelation{A} \subseteq f\ImageOfSetUnderRelation{T}\).
根据\(A \in S\)推出\(A \subseteq f\ImageOfSetUnderRelation{T}\)，
这就导致\[
	\bigcup_{A \in S} A \subseteq f\ImageOfSetUnderRelation{T},
	\qquad
	T \subseteq f\ImageOfSetUnderRelation{T}.
\]

另一方面，又从\(T \subseteq f\ImageOfSetUnderRelation{T}\)
可知\(f\ImageOfSetUnderRelation{T} \subseteq f\ImageOfSetUnderRelation{f\ImageOfSetUnderRelation{T}}\).
这说明\(f\ImageOfSetUnderRelation{T} \in S\)，
我们又有\(f\ImageOfSetUnderRelation{T} \subseteq T\).
\end{proof}
\end{example}

\subsection{集族的封闭性}
%@see: 《测度论讲义（第三版）》（严加安） P2 1.1.6
\begin{definition}[集族的封闭性]
设\(\mathcal{C}\)是一个非空集族.

如果\[
	(\forall A,B\in\mathcal{C})
	[A \cap B \in \mathcal{C}],
\]
则称“\(\mathcal{C}\)对有限交封闭”.

如果\[
	(\forall \{A_n\})
	(\forall n\geq1)
	\left[A_n\in\mathcal{C} \implies \bigcap_{k=1}^n A_k \in \mathcal{C}\right],
\]
则称“\(\mathcal{C}\)对可列交封闭”.

如果\[
	(\forall A,B\in\mathcal{C})
	[A \cup B \in \mathcal{C}],
\]
则称“\(\mathcal{C}\)对有限并封闭”.

如果\[
	(\forall \{A_n\})
	(\forall n\geq1)
	\left[A_n\in\mathcal{C} \implies \bigcup_{k=1}^n A_k \in \mathcal{C}\right],
\]
则称“\(\mathcal{C}\)对可列并封闭”.
\end{definition}

\begin{definition}
设\(\mathcal{C}\)是一个非空集族.
定义：\[
	\mathcal{C}_{\cap f}
	\defeq
	\Set*{
		A \given
		A = \bigcap_{k=1}^n A_k,
		A_k \in \mathcal{C}, i=1,\dotsc,n,
		n\geq1
	},
\]
称其为“用有限交运算封闭\(\mathcal{C}\)所得的集族”.
\end{definition}

\begin{proposition}
设\(\mathcal{C}\)是一个非空集族，
则\(\mathcal{C}_{\cap f}\)对有限交封闭.
\end{proposition}
