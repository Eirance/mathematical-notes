\section{导数的基本概念}
\subsection{导数的定义}
\begin{definition}
%@see: 《高等数学（第六版 上册）》 P79 定义
%@see: 《数学分析（第二版 上册）》（陈纪修） P122 定义4.1.2
设\(X\subseteq\mathbb{R}\)，
函数\(f\in\mathbb{R}^X\)在点\(x_0\)的某个邻域\(U(x_0)\)内有定义，
\(x_0 + \increment x \in U(x_0)\).
如果函数增量\(\increment y = f(x_0 + \increment x) - f(x_0)\)
与\(\increment x\)之比\(\frac{\increment y}{\increment x}\)
当\(\increment x\to0\)时的极限\[
	\lim_{\increment x \to 0} \frac{\increment y}{\increment x}
\]存在，
则称“函数\(f\)在点\(x_0\)~\DefineConcept{可导}%
（\(f\) is \emph{differentiable} at \(x_0\)）”
“\(f\)在点\(x_0\)具有导数”
“\(f\)在点\(x_0\)的导数存在”
“点\(x_0\)是\(f\)的\DefineConcept{可导点}”，
把这个极限称为“函数\(f\)在点\(x_0\)的\DefineConcept{导数}%
（the \emph{derivative} of \(f\) at \(x_0\)）”，
记为\[
	f'(x_0), \qquad
	\eval{y'}_{x=x_0}, \qquad
	\eval{\dv{y}{x}}_{x=x_0}, \qquad
	\eval{\dv{f(x)}{x}}_{x=x_0},
	\quad\text{或}\quad
	\dv{f(x_0)}{x},
\]
即\begin{equation}
	f'(x_0)
	\defeq
	\lim_{\increment x\to0} \frac{f(x_0 + \increment x)-f(x_0)}{\increment x}.
\end{equation}

如果极限\[
	\lim_{\increment x \to 0} \frac{\increment y}{\increment x}
\]不存在，
则称“函数\(f\)在点\(x_0\)~\DefineConcept{不可导}”
“点\(x_0\)是\(f\)的\DefineConcept{不可导点}”.
%@see: https://mathworld.wolfram.com/Derivative.html
\end{definition}

\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P131 习题 1.
设函数\(f\)在点\(x_0\)可导.
计算极限\begin{itemize}
	\item \(\lim_{\increment x\to0} \frac{f(x_0 - \increment x) - f(x_0)}{\increment x}\)；
	\item \(\lim_{x \to x_0} \frac{f(x) - f(x_0)}{x - x_0}\)；
	\item \(\lim_{h\to0} \frac{f(x_0+h) - f(x_0-h)}{h}\).
\end{itemize}
\begin{solution}
直接计算得\begin{gather*}
	\lim_{\increment x\to0} \frac{f(x_0 - \increment x) - f(x_0)}{\increment x}
	= - \lim_{\increment x\to0} \frac{f(x_0 + (- \increment x)) - f(x_0)}{(- \increment x)}
	= - f'(x_0), \\
	\lim_{x \to x_0} \frac{f(x) - f(x_0)}{x - x_0}
	\xlongequal{t = x - x_0}
	\lim_{t \to 0} \frac{f(x_0 + (x - x_0)) - f(x_0)}{t}
	= f'(x_0), \\
	\lim_{h\to0} \frac{f(x_0+h) - f(x_0-h)}{h}
	= \lim_{h\to0} \frac{f(x_0+h) - f(x_0)}{h}
	- \lim_{h\to0} \frac{f(x_0-h) - f(x_0)}{h}
	= 2 f'(x_0).
\end{gather*}
\end{solution}
\end{example}

\begin{proposition}
设\(f\colon\mathbb{R}\to\mathbb{R}\)在点\(x\)可导，
\(\lambda>0\)是常数，
则\[
	\lim_{h\to0} \frac{f(x+\lambda h)-f(x)}{h}
	= \lambda f'(x).
\]
\begin{proof}
直接计算得\begin{align*}
	\lim_{h\to0} \frac{f(x+\lambda h)-f(x)}{h}
	&= \lambda \lim_{h\to0} \frac{f(x+\lambda h)-f(x)}{\lambda h} \\
	&\xlongequal{t=\lambda h}
		\lambda \lim_{t\to0} \frac{f(x+t)-f(x)}{t}
	= \lambda f'(x).
	\qedhere
\end{align*}
\end{proof}
\end{proposition}

\begin{definition}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P125 定义3.1.2
设\(X\subseteq\mathbb{R}\)，
函数\(f\in\mathbb{R}^X\).
\begin{itemize}
	\item 如果\(f\)在点\(x_0\)的某个左邻域内有定义，且极限\[
		\lim_{h\to0^-} \frac{f(x_0+h)-f(x_0)}{h}
	\]存在且有限，
	那么把这个极限称为
	“函数\(f\)在点\(x_0\)的\DefineConcept{左导数}（left-sided derivative）”，
	记作\(f'_-(x_0)\).
	\item 如果\(f\)在点\(x_0\)的某个右邻域内有定义，且极限\[
		\lim_{h\to0^+} \frac{f(x_0+h)-f(x_0)}{h}
	\]存在且有限，
	那么把这个极限称为
	“函数\(f\)在点\(x_0\)的\DefineConcept{右导数}（right-sided derivative）”，
	记作\(f'_+(x_0)\).
\end{itemize}
左导数和右导数统称\DefineConcept{单侧导数}（one-sided derivative）.
\end{definition}

\begin{definition}
设函数\(f\colon D\to\mathbb{R}\)在点\(x_0\)的某个去心邻域中有定义.
\begin{itemize}
	\item 把\[
		\lim_{\delta\to0^+} \sup_{0<x-x_0<\delta} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{右上导数}（upper right Dini derivative）”.
	\item 把\[
		\lim_{\delta\to0^+} \inf_{0<x-x_0<\delta} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{右下导数}（lower right Dini derivative）”.
	\item 把\[
		\lim_{\delta\to0^+} \sup_{-\delta<x-x_0<0} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{左上导数}（upper left Dini derivative）”.
	\item 把\[
		\lim_{\delta\to0^+} \inf_{-\delta<x-x_0<0} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{左下导数}（lower left Dini derivative）”.
	\item 右上导数、右下导数、左上导数和左下导数统称为\DefineConcept{狄尼导数}（Dini derivative）.
\end{itemize}
%@see: https://mathworld.wolfram.com/DiniDerivative.html
%@see: https://people.math.sc.edu/schep/diffmonotone.pdf
\end{definition}

\begin{theorem}[导数存在的充分必要条件]\label{theorem:导数.函数在一点的可导性及其单侧可导性的关系}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P125
函数\(f\)在点\(x_0\)可导的充分必要条件是：
其左导数\(f'_-(x_0)\)和右导数\(f'_+(x_0)\)都存在且相等.
%TODO proof
\end{theorem}

\begin{definition}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P127 定义3.1.3
如果函数\(f\colon(a,b)\to\mathbb{R}\)在开区间\((a,b)\)内的每一个点可导，
就称“函数\(f\)在开区间\((a,b)\)内可导”.
\end{definition}

\begin{definition}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P127 定义3.1.3
如果函数\(f\colon[a,b]\to\mathbb{R}\)在开区间\((a,b)\)内可导，
且在点\(a\)的右导数\(f'_+(a)\)及在点\(b\)的左导数\(f'_-(b)\)都存在，
就说“函数\(f\)在闭区间\([a,b]\)上可导”.
\end{definition}

类似地，可以定义\(f\)在\([a,b)\)与\((a,b]\)上可导.

\begin{example}
%@see: 《2016年全国硕士研究生入学统一考试（数学一）》一选择题/第4题
设函数\[
	f(x) = \left\{ \begin{array}{cl}
		x, & x\leq0, \\
		1/n, & 1/(n+1)<x\leq1/n,\,n=1,2,\dotsc.
	\end{array} \right.
\]
考察函数\(f\)在点\(x=0\)的连续性和可导性.
\begin{solution}
显然\(f\)在点\(x=0\)左连续.
对于任意\(\epsilon>0\)，存在正整数\(n_0\)满足\(\frac1{n_0}<\epsilon\)，
取\(\delta=\frac1{n_0}\)，
当\(0 \leq x < \delta\)时，
成立\[
	\abs{f(x) - f(0)}
	= f(x)
	\leq \frac1{n_0}
	< \epsilon,
\]
这就说明函数\(f\)在点\(x=0\)右连续.
由\cref{theorem:极限.函数在一点的连续性及其单侧连续性的关系} 可知\(f\)在点\(x=0\)连续.

显然\(f\)在点\(x=0\)的左导数存在：\[
	f'_-(0) = \lim_{x\to0^-} \frac{f(x) - f(0)}{x - 0}
	= \lim_{x\to0^-} \frac{x}{x}
	= 1.
\]
当\(\frac1{n+1} < x \leq \frac1n\)时，
有\[
	f(x) = \frac1n,
	\qquad
	n \leq \frac1x < n+1,
\]
从而有\[
	1 \leq \frac{f(x)}{x} < \frac{n+1}{n}.
\]
因为当\(n\to\infty\)时有\(x\to0^+\)和\(\frac{n+1}{n}\to1\)，
所以由\cref{theorem:数列极限.夹逼准则} 可得\[
	\frac{f(x)}{x} \to 1
	\quad(n\to\infty).
\]
于是\(f\)在点\(x=0\)的右导数为\[
	f'_+(0) = \lim_{x\to0^+} \frac{f(x) - f(0)}{x - 0}
	= \lim_{x\to0^+} \frac{f(x)}{x}
	= 1.
\]
由\cref{theorem:导数.函数在一点的可导性及其单侧可导性的关系} 可知\(f\)在点\(x=0\)可导.
\end{solution}
%@Mathematica: Plot[Piecewise[{{1/Floor[1/x], 1/(Floor[1/x] + 1) < x <= 1/Floor[1/x] && x > 0}, {x, x <= 0}}], {x, -.5, .5}]
\end{example}

\begin{example}
设函数\(f\)在点\(x=0\)的某个邻域内连续，
函数\(g\)是当\(x\to0\)时的无穷小，
且\(f\)是\(g\)的高阶无穷小.
要使\(f\)在点\(x=0\)可导，
\(g\)应该满足什么条件？
\begin{solution}
由于\(f\)是无穷小，且\(f\)在点\(x=0\)连续，
所以\(f(0)=0\).
根据导数的定义，有\[
	f'(0)
	= \lim_{x\to0} \frac{f(x) - f(0)}{x-0}
	= \lim_{x\to0} \frac{f(x)}{x}
	= \lim_{x\to0} \frac{f(x)}{g(x)} \cdot \frac{g(x)}{x}.
\]
由此可见，要使极限\[
	\lim_{x\to0} \frac{f(x)}{g(x)} \cdot \frac{g(x)}{x}
\]存在，
只需要极限\[
	\lim_{x\to0} \frac{g(x)}{x} % \(g\)是\(x\)的同阶无穷小或高阶无穷小
\]存在.
\end{solution}
\end{example}

\subsection{导函数的定义}
设函数\(f\colon I\to\mathbb{R}\)在区间\(I\)内的每一个点可导，
那么，对于\(\forall x_0 \in I\)，
都对应着\(f(x_0)\)的一个确定的导数值\(f'(x_0)\).
这样就构成一个新的函数.

\begin{definition}
设函数\(f\colon I\to\mathbb{R}\)在区间\(I\)内的每一个点可导，
则\(I\)中每一点\(x_0\)与其相应的\(f\)在点\(x_0\)的导数\(f'(x_0)\)的关系\[
	\Set{ (x_0,f'(x_0)) \given x_0 \in I }
\]称为“函数\(f\)的\DefineConcept{导函数}（derivative function）”，
简称\DefineConcept{导数}，
记作\[
	f'(x), \qquad
	y', \qquad
	\dv{y}{x}, \qquad
	\dv{f(x)}{x}
	\quad\text{或}\quad
	\dv{x} f(x).
\]
\end{definition}

\begin{definition}\label{definition:函数族.可导函数族}
由区间\(I\)上全部的可导函数组成的集合，称作\DefineConcept{可导函数族}，
记作\(D(I)\)\footnote{当\(I=(a,b)\)时，可将\(D(I)\)改写为\(D(a,b)\).
当\(I=[a,b]\)时，可将\(D(I)\)改写为\(D[a,b]\).
以此类推.}，
即\[
	D(I)
	\defeq
	\Set*{
		f\in\mathbb{R}^I
		\given
		(\forall x \in I)
		[\text{\(f\)在点\(x\)可导}]
	}.
\]
\end{definition}

\begin{example}%\label{example:导数.常数函数的导数}
%@see: 《高等数学（第六版 上册）》 P81 例1
求函数\(f(x) = C\)的导数，其中\(C\)为常数.
\begin{solution}
\(f'(x)
= \lim_{h\to0} \frac{f(x+h)-f(x)}{h}
= \lim_{h\to0} \frac{C-C}{h}
= 0\).
\end{solution}
\end{example}

\begin{example}%\label{example:导数.幂函数的导数}
%@see: 《高等数学（第六版 上册）》 P81 例2
求函数\(f(x) = x^n\)在\(x=a\)处的导数，
其中\(a\in\mathbb{R},
n\in\mathbb{N}^+\).
\begin{solution}
\(f'(a)
= \lim_{x \to a} \frac{x^n-a^n}{x-a}
= \lim_{x \to a} (x^{n-1}+ax^{n-2}+\dotsb+a^{n-1})
= na^{n-1}\).
\end{solution}
\end{example}

更一般地，对于幂函数\(y=x^{\mu}\ (\mu\in\mathbb{R})\)，
有\begin{equation}
	(x^{\mu})' = \mu x^{\mu-1}.
\end{equation}

\begin{example}%\label{example:导数.正弦函数的导数}
%@see: 《高等数学（第六版 上册）》 P81 例3
求函数\(f(x) = \sin x\)的导数.
\begin{solution}
\(f'(x) = \lim_{h\to0} \frac{\sin(x+h)-\sin x}{h}
= \lim_{h\to0} \cos(x+\frac{h}{2}) \frac{\sin(h/2)}{h/2}
= \cos x\).
\end{solution}
\end{example}

\begin{example}%\label{example:导数.余弦函数的导数}
求函数\(f(x) = \cos x\)的导数.
\begin{solution}
\(f'(x) = \lim_{h\to0} \frac{\cos(x+h)-\cos x}{h}
= - \lim_{h\to0} \sin\left(x+\frac{h}2\right) \frac{\sin(h/2)}{h/2}
= - \sin x\).
\end{solution}
\end{example}

\begin{example}%\label{example:导数.指数函数的导数}
%@see: 《高等数学（第六版 上册）》 P82 例4
求函数\(f(x) = a^x\ (a>0,a\neq1)\)的导数.
\begin{solution}
\(f'(x)
= \lim_{h\to0}\frac{a^{x+h}-a^x}{h}
= a^x \lim_{h\to0}\frac{a^h-1}{h}
= a^x \ln a\).
\end{solution}
\end{example}
\begin{remark}
特别地，当\(a=e\)时，因\(\ln e = 1\)，故有\[
	(e^x)' = e^x.
\]
\end{remark}

\begin{example}%\label{example:导数.对数函数的导数}
%@see: 《高等数学（第六版 上册）》 P82 例5
求函数\(f(x) = \log_a x\ (a>0,a\neq1)\)的导数.
\begin{solution}
\(f'(x)
= \lim_{h\to0}\frac{\log_a(x+h)-\log_a x}{h}
= \lim_{h\to0}{\frac{1}{h} \log_a\frac{x+h}{x}}
= \frac{1}{x} \lim_{h\to0}\frac{\log_a(1+h/x)}{h/x}
= \frac{1}{x \ln a}\).
\end{solution}
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P82 例6
求函数\(f(x) = \abs{x}\)在\(x=0\)处的导数.
\begin{solution}
\(\frac{f(0+h)-f(0)}{h} = \frac{\abs{h}-0}{h} = \frac{\abs{h}}{h}\).

当\(h < 0\)时，\(\frac{\abs{h}}{h} = -1\)，
故\(\lim_{h\to0^-}\frac{f(0+h)-f(0)}{h}
= \lim_{h\to0^-}\frac{\abs{h}}{h} = -1\).

当\(h > 0\)时，\(\frac{\abs{h}}{h} = 1\)，
故\(\lim_{h\to0^+}\frac{f(0+h)-f(0)}{h}
= \lim_{h\to0^+}\frac{\abs{h}}{h} = 1\).

综上，\(\lim_{h\to0}\frac{f(0+h)-f(0)}{h}\)不存在，即函数\(f(x) = \abs{x}\)在\(x = 0\)处不可导.
\end{solution}
\end{example}

\subsection{导数的几何意义}
曲线\(y=f(x)\)在点\(M(x_0,y_0)\)处的\DefineConcept{切线方程}为\[
	y-y_0=f'(x_0)(x-x_0).
\]

过切点\(M(x_0,y_0)\)且与切线垂直的直线叫做曲线\(y=f(x)\)在点\(M\)处的\DefineConcept{法线}.
如果\(f'(x_0) \neq 0\)，则法线的斜率为\(-\frac{1}{f'(x_0)}\)，从而法线方程为\[
	y-y_0=-\frac{1}{f'(x_0)}(x-x_0);
\]
而如果\(f'(x_0) = 0\)，则法线方程为\(x = x_0\).

\begin{proposition}\label{theorem:导数.导数的等价定义1}
设\(f\colon\mathbb{R}\to\mathbb{R}\)在点\(x\)可导，
则\[
	\lim_{h\to0} \frac{f(x)-f(x-h)}{h}
	= f'(x).
\]
\begin{proof}
令\(t=-h\)，
则\[
	\lim_{h\to0} \frac{f(x)-f(x-h)}{h}
	= \lim_{t\to0} \frac{f(x)-f(x+t)}{-t}
	= \lim_{t\to0} \frac{f(x+t)-f(x)}{t}
	= f'(x).
	\qedhere
\]
\end{proof}
\end{proposition}
\cref{theorem:导数.导数的等价定义1} 的几何意义非常明确：
对于可导函数\(f\)，
过点\((x_0,f(x_0))\)可以作一条直线，与曲线\(y=f(x)\)相交于一点\((x_1,f(x_1))\)，
不论是\(x_1>x_0\)还是\(x_1<x_0\)，只要\(x_1\)与\(x_0\)之间的距离足够小，
由\((x_0,f(x_0))\)与\((x_1,f(x_1))\)两点确定的直线就近似于
曲线\(y=f(x)\)在点\((x_0,f(x_0))\)处的切线.

\begin{proposition}\label{theorem:导数与微分.导函数的奇偶性}
设\(R>0\)，\(f'\)是函数\(f\colon(-R,R)\to\mathbb{R}\)的导函数.
\begin{itemize}
	\item 如果\(f\)是奇函数，那么\(f'\)是偶函数.
	\item 如果\(f\)是偶函数，那么\(f'\)是奇函数.
\end{itemize}
\begin{proof}
假设\(f\)是奇函数，
即\[
	(\forall x)
	[
		-R < x < R
		\implies
		f(-x) = -f(x)
	],
\]
那么由\cref{theorem:导数.导数的等价定义1} 有\[
	f'(-x)
	= \lim_{h\to0} \frac{f(-x+h)-f(-x)}{h}
	= \lim_{h\to0} \frac{-f(x-h)+f(x)}{h}
	= f'(x).
\]
这就说明\(f'\)是偶函数.

假设\(f\)是偶函数，
即\[
	(\forall x)
	[
		-R < x < R
		\implies
		f(-x) = f(x)
	],
\]
那么由\cref{theorem:导数.导数的等价定义1} 有\[
	f'(-x)
	= \lim_{h\to0} \frac{f(-x+h)-f(-x)}{h}
	= \lim_{h\to0} \frac{f(x-h)-f(x)}{h}
	= -f'(x).
\]
这就说明\(f'\)是奇函数.
\end{proof}
\end{proposition}
\begin{proposition}\label{theorem:导数与微分.导函数的周期性}
以\(T\)为周期的可导函数\(f\colon\mathbb{R}\to\mathbb{R}\)的导函数也是以\(T\)为周期的函数.
\begin{proof}
%@see: https://www.bilibili.com/video/BV1sg4y1i7Ak/
由给定条件有\[
	f(x+T) = f(x),
\]
那么对于\(\forall h\in\mathbb{R}\)成立\[
	f(x+T+h) = f(x+h),
\]
于是\begin{align*}
	f'(x+T)
	&= \lim_{h\to0} \frac{f(x+T+h) - f(x+T)}{h} \\
	&= \lim_{h\to0} \frac{f(x+h) - f(x)}{h}
	= f'(x).
	\qedhere
\end{align*}
\end{proof}
\end{proposition}

\subsection{函数可导性与连续性的关系}
\begin{theorem}\label{theorem:导数与微分.函数可导性与连续性的关系}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P125 定理3.1.1
如果函数\(f\)在点\(x_0\)可导，
则\(f\)必定在点\(x_0\)连续.
\begin{proof}
记\(f\)在点\(x_0\)的导数为\(f'(x_0)\)，
于是由\begin{align*}
	\lim_{x \to x_0} (f(x) - f(x_0))
	&= \lim_{x \to x_0} \frac{f(x) - f(x_0)}{x - x_0} \cdot (x - x_0) \\
	&= \lim_{x \to x_0} \frac{f(x) - f(x_0)}{x - x_0} \cdot \lim_{x \to x_0} (x - x_0) \\
	&= f'(x_0) \cdot 0
	= 0,
\end{align*}
可知\(\lim_{x \to x_0} f(x) = f(x_0)\)，
这就说明\(f\)在点\(x_0\)连续.
\end{proof}
\end{theorem}
借用\cref{definition:函数族.连续函数族} 和\cref{definition:函数族.可导函数族} 的记号，
可以将\cref{theorem:导数与微分.函数可导性与连续性的关系} 描述为：\[
	D(I) \subseteq C(I).
\]

\begin{example}\label{example:导数.函数在一点的导数是无穷大}
函数\(y=f(x)=\sqrt[3]x\)
在区间\((-\infty,+\infty)\)内连续，
但是在点\(x=0\)处不可导.
这是因为在点\(x=0\)处有\[
	\frac{f(0+h)-f(0)}{h}
	=\frac{\sqrt[3]{h}-0}{h}
	=\frac{1}{h^{2/3}}>0,
\]
因而，
\(\lim_{h\to0} \frac{f(0+h)-f(0)}{h}
=\lim_{h\to0} \frac{1}{h^{2/3}}
=\infty\)，
即导数为无穷大（导数不存在）.
这事实在图形中表现为：
曲线\(y=\sqrt[3]x\)在原点具有垂直于\(x\)轴的切线\(x=0\).
\end{example}

\begin{example}\label{example:导数.函数在一点的左右导数不相等}
函数\(y=\sqrt{x^2}\)（即\(y=\abs{x}\)）
在\((-\infty,+\infty)\)内连续，
但是在\(x=0\)处不可导，
曲线\(y=\sqrt{x^2}\)在原点没有切线.
这是因为\[
	\lim_{x\to0^+} \frac{f(x)-f(0)}{x-0}
	= \lim_{x\to0^+} \frac{x-0}{x-0}
	= 1,
\]
而\[
	\lim_{x\to0^-} \frac{f(x)-f(0)}{x-0}
	= \lim_{x\to0^-} \frac{(-x)-0}{x-0}
	= -1.
\]
\end{example}

\begin{theorem}
“函数\(f\)在点\(x_0\)连续”是“\(f\)在点\(x_0\)可导”的必要不充分条件.
\begin{proof}
由\cref{theorem:导数与微分.函数可导性与连续性的关系} 已知：
如果函数\(f\)在点\(x_0\)可导，则\(f\)必定在点\(x_0\)连续.
由\cref{example:导数.函数在一点的导数是无穷大,example:导数.函数在一点的左右导数不相等} 可知：
纵使函数\(f\)在点\(x_0\)连续，\(f\)在点\(x_0\)也可能不可导.
\end{proof}
\end{theorem}

\begin{example}\label{example:连续函数.狄利克雷函数改2只在一点可导}
%@see: https://www.bilibili.com/video/BV1Rr421M7T8/
证明：函数\(f(x) = x^2 D(x)\)在点\(x=0\)可导，在其他各点既不可导也不连续.
\begin{proof}
由定义有\[
	f'(0) = \lim_{x\to0} \frac{f(x) - f(0)}{x - 0}
	= \lim_{x\to0} \frac{x^2 D(x)}{x}
	= \lim_{x\to0} x D(x)
	= 0,%\cref{example:连续函数.狄利克雷函数改1只在一点连续}
\]
函数\(f\)在点\(x=0\)可导.

当\(x\neq0\)时，有\(D(x) = f(x) / x^2\).
用反证法.
假设\(f\)在点\(x_0\neq0\)连续，那么\[
	\lim_{x \to x_0} D(x)
	= \lim_{x \to x_0} \frac{f(x)}{x^2}
	% 连续性、极限的四则运算
	= \frac{f(x_0)}{x_0^2}
	= D(x_0),
\]
即\(D\)在点\(x_0\)连续，
这与\cref{example:连续函数.狄利克雷函数处处不连续} 的结论矛盾，
从而说明\(f\)在任意一点\(x_0\neq0\)不连续，自然也不可导.
\end{proof}
\end{example}
\begin{remark}
\cref{example:连续函数.狄利克雷函数改2只在一点可导} 说明：
单靠“函数\(f\)在点\(x_0\)可导”这个条件，
既不能推出“\(f\)在点\(x_0\)的邻域可导”，
也不能推出“\(f\)在点\(x_0\)的邻域连续”.
%@credit: {de3029b8-10a6-4ae5-8f64-108dae1c10a9}
由于函数\(f\)在非零点处处不可导，
所以\(f\)不具有二阶导数.
同理可知，对于任意整数\(n\geq3\)，
函数\(x \mapsto x^n D(x)\)
只有一阶导数，没有二阶以上导数.
因此得出结论：
即便有\(f(x) = o(x^n)\ (x\to0)\)成立，
也不能推出“\(f\)在点\(x=0\)具有\(n\)阶导数”.
\end{remark}

\begin{example}
\DefineConcept{魏尔斯特拉斯函数}\[
	W(x) = \lim_{n\to\infty} \sum_{k=0}^n a^k \cos(b^k \pi x),
\]在定义域上处处连续而又处处不可导，
其中，参数\(a\)和\(b\)满足\[
	0<a<1,
	\qquad
	b\in\Set{ p \given p = 2q+1, q\in\mathbb{N} },
	\qquad
	ab > 1+\frac{3}{2}\pi.
\]
%TODO proof
\end{example}

\begin{example}
举例说明：可导函数\(f\)满足\(\lim_{x\to+\infty} f(x) = A\)和\(\lim_{x\to+\infty} f'(x) = 0\).
\begin{solution}
取\(f(x) = \frac{\sin x}{x}\)，
则\(\lim_{x\to+\infty} f(x) = \lim_{x\to+\infty} f'(x) = 0\).
\end{solution}
\end{example}
\begin{example}
%@see: https://www.bilibili.com/video/BV1My411q7aE/
举例说明：可导函数\(f\)满足\(\lim_{x\to+\infty} f(x) = A\)，但是不满足\(\lim_{x\to+\infty} f'(x) = 0\).
\begin{solution}
取\(f(x) = \frac{\sin x^2}{x}\)，
则\(\lim_{x\to+\infty} f(x) = 0\)，
而\[
	f'(x) = 2 \cos x^2 - \frac{\sin x^2}{x^2}.
\]
当\(x\to+\infty\)时，虽然\(\frac{\sin x^2}{x^2} \to 0\)，
但是\(\cos x^2\)的极限不存在，
也就是说\(\lim_{x\to+\infty} f'(x)\)不存在.
\end{solution}
\end{example}

\subsection{导函数的连续性与间断点，导数极限定理}
\begin{definition}
设函数\(f\)在点\(x_0\)的某一邻域内可导.
如果\(f\)的导函数\(f'\)在点\(x_0\)连续，
则称“函数\(f\)在点\(x_0\)~\DefineConcept{连续可导}（continuously differentiable）”
%@see: https://mathworld.wolfram.com/ContinuouslyDifferentiableFunction.html
“函数\(f\)在点\(x_0\)具有\DefineConcept{连续导数}（continuous derivative）”.
\end{definition}

%@see: https://zhuanlan.zhihu.com/p/666265696
让我们首先介绍几个例子，回顾导函数可能具有的间断点的类型.

\begin{example}
对函数\[
	f(x) = \left\{ \begin{array}{cl}
		x+1, & x>0, \\
		x-1, & x\leq0
	\end{array} \right.
\]求导得\[
	f'(x) = 1
	\quad(x\neq0).
\]
显然点\(x=0\)是导函数\(f'\)的可去间断点.
\end{example}

\begin{example}
对函数\[
	f(x) = \abs{x}
\]求导得\[
	f'(x) = \left\{ \begin{array}{cl}
		1, & x>0, \\
		-1, & x<0.
	\end{array} \right.
\]
显然点\(x=0\)是导函数\(f'\)的跳跃间断点.
\end{example}

\begin{example}
对函数\[
	f(x) = \frac1x
\]求导得\[
	f'(x) = -\frac1{x^2}.
\]
显然点\(x=0\)是导函数\(f'\)的无穷间断点.
\end{example}

\begin{example}
对函数\[
	f(x) = \left\{ \begin{array}{cl}
		x^2 \sin\frac1x, & x \neq 0, \\
		0, & x = 0
	\end{array} \right.
\]求导得\[
	f'(x) = \left\{ \begin{array}{cl}
		2x \sin\frac1x - \cos\frac1x, & x \neq 0, \\
		0, & x = 0.
	\end{array} \right.
\]
这就是说，函数\(f\)在\((-\infty,+\infty)\)内处处可导.
但是由于点\(x=0\)是函数\(x \mapsto \cos\frac1x\)的振荡间断点，
而\(\lim_{x\to0} x \sin\frac1x = 0\)，
所以点\(x=0\)是导函数\(f'\)的振荡间断点，
自然\(f'\)在点\(x=0\)的极限不存在.
%@Mathematica: Plot[Piecewise[{{x^2 Sin[1/x], x != 0}, {0, x == 0}}], {x, -.5, .5}, PlotRange -> {-.1, .1}]
%@Mathematica: Plot[Piecewise[{{2 x Sin[1/x] - Cos[1/x], x != 0}, {0, x == 0}}], {x, -.5, .5}]
\end{example}

以上四个例子说明：函数的不可导点可能是它的导函数的任意一种类型的间断点.

\begin{theorem}[导数极限定理]\label{theorem:微分中值定理.导数极限定理}
%@see: 《数学分析讲义（第1册）》（程艺） P102 定理3.19
设函数\(f \in C[a,b] \cap D(a,b)\)，\(f'\)是\(f\)的导函数.
\begin{itemize}
	\item 若\(f'\)在点\(a\)的右极限\(f'(a^+)\)存在，
	则\(f\)在点\(a\)的右导数\(f'_+(a)\)也存在，
	且\[
		f'_+(a) = f'(a^+).
	\]
	\item 若\(f'\)在点\(b\)的左极限\(f'(b^-)\)存在，
	则\(f\)在点\(b\)的左导数\(f'_-(b)\)也存在，
	且\[
		f'_-(b) = f'(b^-).
	\]
\end{itemize}
\begin{proof}
对\(\forall x\in(a,b)\)，
由\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}可知，
\(\exists\xi\in(a,x)\)，
使得\[
	f'(\xi) = \frac{f(x)-f(a)}{x-a}.
\]
令\(x \to a^+\)，则\(\xi \to a^+\)，
于是\[
	f'_+(a)
	= \lim_{x \to a^+} \frac{f(x)-f(a)}{x-a}
	= \lim_{\xi \to a^+} f'(\xi)
	= f'(a^+).
\]

同理，\(\exists\zeta\in(x,b)\)，
使得\[
	f'(\zeta) = \frac{f(b)-f(x)}{b-x}.
\]
令\(x \to b^-\)，则\(\xi \to b^-\)，
于是\[
	f'_-(b)
	= \lim_{x \to b^-} \frac{f(x)-f(b)}{x-b}
	= \lim_{\xi \to b^-} f'(\xi)
	= f'(b^-).
	\qedhere
\]
\end{proof}
\end{theorem}

%TODO 需要证明、例子
% \cref{theorem:微分中值定理.导数极限定理} 说明：
% 如果函数在区间内处处可导，
% 则在区间内的每一点处，导函数\(f'\)要么连续，要么有第二类间断点，绝不可能有第一类间断点.
% 由此推出，具有第一类间断点的函数（如符号函数\(\sgn\)）不能作为某个函数的导函数.

%TODO 需要证明、例子
% 还应该指出：
% 如果函数\(f\)在区间\((a,b)\)内可导，
% 那么\(f\)的导函数\(f'\)在\((a,b)\)内
% 不可能存在可去间断点、跳跃间断点和无穷间断点，
% 只可能存在振荡间断点.
