\section{导数的基本概念}
\subsection{导数的定义}
\begin{definition}
%@see: 《高等数学（第六版 上册）》 P79 定义
%@see: 《数学分析（第二版 上册）》（陈纪修） P122 定义4.1.2
设\(X\subseteq\mathbb{R}\)，
函数\(f\in\mathbb{R}^X\)在点\(x_0\)的某个邻域\(U(x_0)\)内有定义，
\(x_0 + \increment x \in U(x_0)\).
如果函数增量\(\increment y = f(x_0 + \increment x) - f(x_0)\)
与\(\increment x\)之比\(\frac{\increment y}{\increment x}\)
当\(\increment x\to0\)时的极限\[
	\lim_{\increment x \to 0} \frac{\increment y}{\increment x}
\]存在，
则把这个极限称为“函数\(f\)在点\(x_0\)的\DefineConcept{导数}%
（the \emph{derivative} of \(f\) at \(x_0\)）”，
记为\[
	f'(x_0), \qquad
	\eval{y'}_{x=x_0}, \qquad
	\eval{\dv{y}{x}}_{x=x_0}, \qquad
	\eval{\dv{f(x)}{x}}_{x=x_0}, \quad\text{或}\quad
	\dv{f(x_0)}{x}.
\]
即\begin{equation}
	f'(x_0)
	\defeq
	\lim_{\increment x\to0} \frac{f(x_0 + \increment x)-f(x_0)}{\increment x};
\end{equation}
并称“函数\(f\)在点\(x_0\)~\DefineConcept{可导}%
（\(f\) is \emph{differentiable} at \(x_0\)）”
“\(f\)在点\(x_0\)具有导数”
“\(f\)在点\(x_0\)的导数存在”
“点\(x_0\)是\(f\)的\DefineConcept{可导点}”.

如果极限\[
	\lim_{\increment x \to 0} \frac{\increment y}{\increment x}
\]不存在，
则称“函数\(f\)在点\(x_0\)~\DefineConcept{不可导}”
“点\(x_0\)是\(f\)的\DefineConcept{不可导点}”.
%@see: https://mathworld.wolfram.com/Derivative.html
\end{definition}

导数的定义式还有两个等价形式：\begin{equation}
	f'(x_0) = \lim_{\increment x \to 0} \frac{f(x_0 - \increment x) - f(x_0)}{\increment x}, \\
	f'(x_0) = \lim_{x \to x_0}\frac{f(x) - f(x_0)}{x - x_0}.
\end{equation}

\begin{definition}
设\(X\subseteq\mathbb{R}\)，
函数\(f\in\mathbb{R}^X\).
\begin{itemize}
	\item 把极限\[
		\lim_{h\to0^-} \frac{f(x_0+h)-f(x_0)}{h}
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{左导数}（left-sided derivative）”，
	记作\(f'_-(x_0)\).
	\item 把极限\[
		\lim_{h\to0^+} \frac{f(x_0+h)-f(x_0)}{h}
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{右导数}（right-sided derivative）”，
	记作\(f'_+(x_0)\).
	\item 左导数和右导数统称\DefineConcept{单侧导数}（one-sided derivative）.
\end{itemize}
\end{definition}

\begin{definition}
设函数\(f\colon D\to\mathbb{R}\)在点\(x_0\)的某个去心邻域中有定义.
\begin{itemize}
	\item 把\[
		\lim_{\delta\to0^+} \sup_{0<x-x_0<\delta} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{右上导数}（upper right Dini derivative）”.
	\item 把\[
		\lim_{\delta\to0^+} \inf_{0<x-x_0<\delta} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{右下导数}（lower right Dini derivative）”.
	\item 把\[
		\lim_{\delta\to0^+} \sup_{-\delta<x-x_0<0} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{左上导数}（upper left Dini derivative）”.
	\item 把\[
		\lim_{\delta\to0^+} \inf_{-\delta<x-x_0<0} f(x)
	\]称为“函数\(f\)在点\(x_0\)的\DefineConcept{左下导数}（lower left Dini derivative）”.
	\item 右上导数、右下导数、左上导数和左下导数统称为\DefineConcept{狄尼导数}（Dini derivative）.
\end{itemize}
%@see: https://mathworld.wolfram.com/DiniDerivative.html
%@see: https://people.math.sc.edu/schep/diffmonotone.pdf
\end{definition}

\begin{theorem}[导数存在的充分必要条件]
函数\(f\)在点\(x_0\)可导的充分必要条件是：
其左导数\(f'_-(x_0)\)和右导数\(f'_+(x_0)\)都存在且相等.
\end{theorem}

\begin{definition}
如果函数\(f\colon(a,b)\to\mathbb{R}\)在开区间\((a,b)\)内的每一个点可导，
就称“函数\(f\)在开区间\((a,b)\)内可导”.
\end{definition}

\begin{definition}
如果函数\(f\colon[a,b]\to\mathbb{R}\)在开区间\((a,b)\)内可导，
且\(f'_+(a)\)及\(f'_-(b)\)都存在，
就说“函数\(f\)在闭区间\([a,b]\)上可导”.
\end{definition}

\subsection{导函数的定义}
设函数\(f\colon I\to\mathbb{R}\)在区间\(I\)内的每一个点可导，
那么，对于\(\forall x_0 \in I\)，
都对应着\(f(x_0)\)的一个确定的导数值\(f'(x_0)\).
这样就构成一个新的函数.

\begin{definition}
设函数\(f\colon I\to\mathbb{R}\)在区间\(I\)内的每一个点可导，
把函数\[
	I\to\mathbb{R},
	x \mapsto f'(x)
\]称为“函数\(f\)的\DefineConcept{导函数}（derivative function）”，
简称导数，
记作\[
	y', \qquad
	f'(x), \qquad
	\dv{y}{x}, \qquad
	\dv{f(x)}{x}
	\quad\text{或}\quad
	\dv{x} f(x).
\]
\end{definition}

\begin{definition}\label{definition:函数族.可导函数族}
由区间\(I\)上全部的可导函数组成的集合，称作\DefineConcept{可导函数族}，
记作\(D(I)\)\footnote{当\(I=(a,b)\)时，可改写为\(D(a,b)\)，以此类推.}，
即\[
	D(I)
	\defeq
	\Set*{
		f\in\mathbb{R}^I
		\given
		(\forall x \in I)
		[\text{\(f\)在点\(x\)可导}]
	}.
\]
\end{definition}

\begin{proposition}
设\(f\colon\mathbb{R}\to\mathbb{R}\)在点\(x\)可导，
\(\lambda>0\)是常数，
则\[
	\lim_{h\to0} \frac{f(x+\lambda h)-f(x)}{h}
	= \lambda f'(x).
\]
\begin{proof}
直接计算得\begin{align*}
	\lim_{h\to0} \frac{f(x+\lambda h)-f(x)}{h}
	&= \lambda \lim_{h\to0} \frac{f(x+\lambda h)-f(x)}{\lambda h} \\
	&\xlongequal{t=\lambda h}
		\lambda \lim_{t\to0} \frac{f(x+t)-f(x)}{t}
	= \lambda f'(x).
	\qedhere
\end{align*}
\end{proof}
\end{proposition}

\begin{example}
求函数\(f(x) = C\)的导数，其中\(C\)为常数.
\begin{solution}
\(f'(x)
= \lim_{h\to0}\frac{C-C}{h}
= 0\).
\end{solution}
\end{example}

\begin{example}
求函数\(f(x) = x^n\)在\(x=a\)处的导数，其中\(a\in\mathbb{R},
n\in\mathbb{N}^+\).
\begin{solution}
\(f'(a)
= \lim_{x \to a}\frac{x^n-a^n}{x-a}
= \lim_{x \to a}(x^{n-1}+ax^{n-2}+\dotsb+a^{n-1})
= na^{n-1}\).
\end{solution}
\end{example}

更一般地，对于幂函数\(y=x^{\mu}\ (\mu\in\mathbb{R})\)，有\begin{equation}
	(x^{\mu})' = \mu x^{\mu-1}.
\end{equation}

\begin{example}
求函数\(f(x) = \sin x\)的导数.
\begin{solution}
\(f'(x) = \lim_{h\to0}\frac{\sin(x+h)-\sin x}{h}
= \lim_{h\to0}{\cos(x+\frac{h}{2}) \frac{\sin(h/2)}{h/2}}
= \cos x\).
\end{solution}
\end{example}

\begin{example}
求函数\(f(x) = a^x\ (a > 0 \land a \neq 1)\)的导数.
\begin{solution}
\(f'(x)
= \lim_{h\to0}\frac{a^{x+h}-a^x}{h}
= a^x \lim_{h\to0}\frac{a^h-1}{h}
= a^x \ln a\).
\end{solution}

特别地，当\(a=e\)时，因\(\ln e = 1\)，故有\[
	(e^x)' = e^x.
\]
\end{example}

\begin{example}
求函数\(f(x) = \log_a x\ (a > 0 \land a \neq 1)\)的导数.
\begin{solution}
\(f'(x)
= \lim_{h\to0}\frac{\log_a(x+h)-\log_a x}{h}
= \lim_{h\to0}{\frac{1}{h} \log_a\frac{x+h}{x}}
= \frac{1}{x} \lim_{h\to0}\frac{\log_a(1+h/x)}{h/x}
= \frac{1}{x \ln a}\).
\end{solution}
\end{example}

\begin{example}
求函数\(f(x) = \abs{x}\)在\(x=0\)处的导数.
\begin{solution}
\(\frac{f(0+h)-f(0)}{h} = \frac{\abs{h}-0}{h} = \frac{\abs{h}}{h}\).

当\(h < 0\)时，\(\frac{\abs{h}}{h} = -1\)，
故\(\lim_{h\to0^-}\frac{f(0+h)-f(0)}{h}
= \lim_{h\to0^-}\frac{\abs{h}}{h} = -1\).

当\(h > 0\)时，\(\frac{\abs{h}}{h} = 1\)，
故\(\lim_{h\to0^+}\frac{f(0+h)-f(0)}{h}
= \lim_{h\to0^+}\frac{\abs{h}}{h} = 1\).

综上，\(\lim_{h\to0}\frac{f(0+h)-f(0)}{h}\)不存在，即函数\(f(x) = \abs{x}\)在\(x = 0\)处不可导.
\end{solution}
\end{example}

\subsection{导数的几何意义}
\begin{theorem}
曲线\(y=f(x)\)在点\(M(x_0,y_0)\)处的\DefineConcept{切线方程}为\[
	y-y_0=f'(x_0)(x-x_0).
\]

过切点\(M(x_0,y_0)\)且与切线垂直的直线叫做曲线\(y=f(x)\)在点\(M\)处的\DefineConcept{法线}.
如果\(f'(x_0) \neq 0\)，则法线的斜率为\(-\frac{1}{f'(x_0)}\)，从而法线方程为\[
	y-y_0=-\frac{1}{f'(x_0)}(x-x_0);
\]
而如果\(f'(x_0) = 0\)，则法线方程为\(x = x_0\).
\end{theorem}

\begin{proposition}\label{theorem:导数.导数的等价定义1}
设\(f\colon\mathbb{R}\to\mathbb{R}\)，
则\(f\)在点\(x\)可导
当且仅当\[
	\lim_{h\to0} \frac{f(x)-f(x-h)}{h}
	= f'(x).
\]
\begin{proof}
令\(t=-h\)，
则\[
	\lim_{h\to0} \frac{f(x)-f(x-h)}{h}
	= \lim_{t\to0} \frac{f(x)-f(x+t)}{-t}
	= \lim_{t\to0} \frac{f(x+t)-f(x)}{t}
	= f'(x).
	\qedhere
\]
\end{proof}
\end{proposition}
\cref{theorem:导数.导数的等价定义1} 的几何意义非常明确：
对于可导函数\(f\)，
过点\((x_0,f(x_0))\)可以作一条直线，与曲线\(y=f(x)\)相交于一点\((x_1,f(x_1))\)，
不论是\(x_1>x_0\)还是\(x_1<x_0\)，只要\(x_1\)与\(x_0\)之间的距离足够小，
由\((x_0,f(x_0))\)与\((x_1,f(x_1))\)两点确定的直线就近似于
曲线\(y=f(x)\)在点\((x_0,f(x_0))\)处的切线.

\begin{proposition}\label{theorem:导数与微分.导函数的奇偶性}
设\(R>0\)，\(f'\)是函数\(f\colon(-R,R)\to\mathbb{R}\)的导函数.
\begin{itemize}
	\item 如果\(f\)是奇函数，那么\(f'\)是偶函数.
	\item 如果\(f\)是偶函数，那么\(f'\)是奇函数.
\end{itemize}
\begin{proof}
假设\(f\)是奇函数，
即\[
	(\forall x)
	[
		-R < x < R
		\implies
		f(-x) = -f(x)
	],
\]
那么由\cref{theorem:导数.导数的等价定义1} 有\[
	f'(-x)
	= \lim_{h\to0} \frac{f(-x+h)-f(-x)}{h}
	= \lim_{h\to0} \frac{-f(x-h)+f(x)}{h}
	= f'(x).
\]
这就说明\(f'\)是偶函数.

假设\(f\)是偶函数，
即\[
	(\forall x)
	[
		-R < x < R
		\implies
		f(-x) = f(x)
	],
\]
那么由\cref{theorem:导数.导数的等价定义1} 有\[
	f'(-x)
	= \lim_{h\to0} \frac{f(-x+h)-f(-x)}{h}
	= \lim_{h\to0} \frac{f(x-h)-f(x)}{h}
	= -f'(x).
\]
这就说明\(f'\)是奇函数.
\end{proof}
\end{proposition}

\subsection{函数可导性与连续性的关系}
\begin{theorem}\label{theorem:导数与微分.函数可导性与连续性的关系}
如果函数\(y = f(x)\)在点\(x_0\)可导，
则函数在该点必连续.
\begin{proof}
因为函数\(y = f(x)\)在点\(x_0\)可导，所以极限\[
	f'(x_0) = \lim_{x \to x_0}\frac{f(x)-f(x_0)}{x-x_0} = A
\]存在，
也就是说\[
	(\forall \epsilon_1 > 0)
	(\exists \delta_1 > 0)
	\left[
		0 < \abs{x-x_0} < \delta_1
		\implies
		\abs{\frac{f(x)-f(x_0)}{x-x_0} - A} < \epsilon_1
	\right].
\]

由\(\abs{\frac{f(x)-f(x_0)}{x-x_0} - A} < \epsilon_1\)
可得\[
	\abs{\abs{f(x)-f(x_0)} - \abs{A(x-x_0)}}
	\leq \abs{f(x)-f(x_0) - A(x-x_0)}
	< \epsilon_1 \abs{x-x_0},
\]\[
	\abs{f(x)-f(x_0)} < (\abs{A} + \epsilon_1) \abs{x-x_0},
\]
只要取\(\epsilon_2 = (\abs{A} + \epsilon_1) \abs{x-x_0}\)
即有\(\abs{f(x)-f(x_0)} < \epsilon_2\).
\end{proof}
\end{theorem}
借用\cref{definition:函数族.连续函数族} 和\cref{definition:函数族.可导函数族} 的记号，
可以将\cref{theorem:导数与微分.函数可导性与连续性的关系} 描述为：\[
	D(I) \subseteq C(I).
\]

但是，一个函数在某点连续却不一定在该点可导.
\begin{example}
函数\(y=f(x)=\sqrt[3]x\)
在区间\((-\infty,+\infty)\)内连续，
但是在点\(x=0\)处不可导.
这是因为在点\(x=0\)处有\[
	\frac{f(0+h)-f(0)}{h}
	=\frac{\sqrt[3]{h}-0}{h}
	=\frac{1}{h^{2/3}}>0,
\]
因而，
\(\lim_{h\to0} \frac{f(0+h)-f(0)}{h}
=\lim_{h\to0} \frac{1}{h^{2/3}}
=\infty\)，
即导数为无穷大（导数不存在）.
这事实在图形中表现为：
曲线\(y=\sqrt[3]x\)在原点具有垂直于\(x\)轴的切线\(x=0\).
\end{example}

\begin{example}
函数\(y=\sqrt{x^2}\)（即\(y=\abs{x}\)）
在\((-\infty,+\infty)\)内连续，
但是在\(x=0\)处不可导，
曲线\(y=\sqrt{x^2}\)在原点没有切线.
这是因为\[
	\lim_{x\to0^+} \frac{f(x)-f(0)}{x-0}
	= \lim_{x\to0^+} \frac{x-0}{x-0}
	= 1,
\]
而\[
	\lim_{x\to0^-} \frac{f(x)-f(0)}{x-0}
	= \lim_{x\to0^-} \frac{(-x)-0}{x-0}
	= -1.
\]
\end{example}

\begin{remark}
函数在某一点连续是函数在该点可导的必要不充分条件.
\end{remark}

% \begin{example}
% 函数\[
% 	W(x) = \lim_{n\to\infty} \sum_{k=0}^n a^k \cos(b^k \pi x),
% \]称为\DefineConcept{魏尔斯特拉斯函数}，
% 它的参数\(a\)和\(b\)满足\(0<a<1, b\in\Set{ p \given p = 2q+1, q\in\mathbb{N} }, ab > 1+\frac{3}{2}\pi\).
% 可以证明，魏尔斯特拉斯函数在定义域上处处连续而又处处不可导.
% \end{example}
