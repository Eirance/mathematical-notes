\section{连续函数}\label{section:连续函数.函数的连续性与间断点}
\subsection{连续点}
\begin{definition}\label{definition:极限.函数在一点的连续性}
%@see: 《数学分析（第二版 上册）》（陈纪修） P88 定义3.2.1
%@see: 《高等数学（第六版 上册）》 P61 定义
设函数\(f\)在点\(x_0\)的某一邻域内有定义.
如果\[
	\lim_{x \to x_0} f(x) = f(x_0),
\]
那么就称“函数\(f\)在点\(x_0\)~\DefineConcept{连续}
（\(f\) is continuous at \(x_0\)）”，
称“点\(x_0\)是函数\(f\)的\DefineConcept{连续点}（point of continuity）”.
\end{definition}

上述对函数连续的定义可以简化为：\[
	\text{\(f\)在点\(x_0\)连续}
	\iff
	(\forall\epsilon>0)
	(\exists\delta>0)
	(\forall x)
	[
		\abs{x - x_0} < \delta
		\implies
		\abs{f(x) - f(x_0)} < \epsilon
	].
\]

\begin{proposition}%函数在一点连续的等价定义
设函数\(f\)在点\(x_0\)的某一邻域内有定义.
如果\[
	\lim_{h\to0} (f(x_0+h) - f(x_0)) = 0,
\]
则函数\(f\)在点\(x_0\)连续.
%TODO proof
\end{proposition}

\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P89 定义3.2.3
如果函数\(f\)在点\(x_0\)的某一左邻域内有定义，
极限\(f(x_0^-) = \lim_{x \to x_0^-} f(x)\)存在，
且\[
	f(x_0^-) = f(x_0),
\]
则称“函数\(f\)在点\(x_0\)~\DefineConcept{左连续}
（\(f\) is left-continuous at \(x_0\)）”.
\end{definition}

\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P89 定义3.2.3
如果函数\(f\)在点\(x_0\)的某一右邻域内有定义，
极限\(f(x_0^+) = \lim_{x \to x_0^+} f(x)\)存在，
且\[
	f(x_0^+) = f(x_0),
\]
则称“函数\(f\)在点\(x_0\)~\DefineConcept{右连续}
（\(f\) is right-continuous at \(x_0\)）”.
\end{definition}

\subsection{连续区间}
\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P89 定义3.2.2
如果函数\(f\)满足\[
	(\forall x_0\in(a,b))
	[\text{\(f\)在点\(x_0\)连续}],
\]
那么称“函数\(f\)在开区间\((a,b)\)内连续”.
\end{definition}

\begin{example}
设函数\(f\colon(a,b)\to\mathbb{R}\)在开区间\((a,b)\)内连续，
举例说明：\(f(a^+)\)和\(f(b^-)\)均不存在.
\begin{solution}
%@credit: {61d1026b-642e-438a-9506-08e3e7865f96}
取\(f(x) = \tan x\)，
它在\(\left( -\frac\pi2,\frac\pi2 \right)\)内连续，
但\[
	\lim_{x\to-\frac\pi2^-} f(x) = -\infty,
	\qquad
	\lim_{x\to\frac\pi2^+} f(x) = +\infty.
\]
\end{solution}
\end{example}

\begin{example}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P91 例4(1)
证明：狄利克雷函数\[
	D(x) = \left\{ \begin{array}{ll}
		1, & x \in \mathbb{Q}, \\
		0, & x \in \mathbb{R}-\mathbb{Q}
	\end{array} \right.
\]在\((-\infty,\infty)\)上的每一个点都不连续.
\begin{proof}
由\cref{example:海涅定理.狄利克雷函数在任意一点的极限都不存在}
可知狄利克雷函数在任意一点的极限都不存在，
那么它当然在任意一点不连续.
\end{proof}
\end{example}
\begin{example}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P91 例4(2)
证明：函数\(f(x) = x~D(x)\)除了在点\(x=0\)连续之外，在其他各点均不连续.
\begin{proof}
当\(x\to0\)时，\(D(x)\)是一个有界量，
于是由\cref{theorem:函数极限.无穷小.有界函数与无穷小的乘积是无穷小} 可知
\(\lim_{x\to0} f(x) = f(0) = 0\).

取\(x_0\neq0\)，有\[
	\lim_{\substack{x \to x_0 \\ x \in \mathbb{Q}}} f(x)
	= x_0
	\neq
	\lim_{\substack{x \to x_0 \\ x \in \mathbb{R}-\mathbb{Q}}} f(x)
	= 0,
\]
所以\(\lim_{x \to x_0} f(x)\)不存在.
\end{proof}
\end{example}
\begin{remark}
%@see: https://www.bilibili.com/video/BV1Rr421M7T8/
举例说明：函数在某一点连续是函数在该点的邻域内连续的必要不充分条件.
\end{remark}

\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P90 定义3.2.4
如果函数\(f\)不仅在开区间\((a,b)\)内连续，
还在点\(a\)处右连续，且在\(b\)处左连续，
那么称“函数\(f\)在闭区间\([a,b]\)上连续”.
\end{definition}

\begin{remark}
上述定义可以统一地表示为如下形式：
设函数\(f\)在某区间\(X\)上有定义.
如果\[
	(\forall x_0\in X)
	(\forall\epsilon>0)
	(\exists\delta>0)
	(\forall x\in X)
	[
		\abs{x-x_0}<\delta
		\implies
		\abs{f(x)-f(x_0)}<\epsilon
	],
\]
则称“函数\(f\)在区间\(X\)上连续”.
\end{remark}

\begin{example}
根式函数\(\sqrt{x}\)在\([0,+\infty)\)上连续.
%\cref{example:极限.根式函数在某一点的极限}
\end{example}

\begin{example}
有理整函数\[
	P_n(x) = a_0 x^n + a_1 x^{n-1} + \dotsb + a_n
\]在\((-\infty,+\infty)\)上连续.
%\cref{equation:函数极限.重要极限3}
\end{example}

\begin{example}
有理分式函数\[
	F(x) = \frac{P_n(x)}{P_m(x)}
\]在其定义域\(\Set{ x\in\mathbb{R} \given P_m(x)\neq0 }\)上连续.
\end{example}

\begin{example}\label{example:极限.正弦函数在实数域上连续}
%@see: 《数学分析（第二版 上册）》（陈纪修） P90 例3.2.3
证明：函数\(f(x) = \sin x\)在\((-\infty,+\infty)\)上连续.
\begin{proof}
任取\(x_0\in(-\infty,+\infty)\).
由\hyperref[equation:函数.三角函数.和积互化公式12]{和积互化公式}有\[
	\abs{\sin x - \sin x_0}
	= 2 \abs{\cos\frac{x+x_0}2 \sin\frac{x-x_0}2}
	= 2 \abs{\cos\frac{x+x_0}2} \abs{\sin\frac{x-x_0}2}.
\]
因为\((\forall\alpha\in\mathbb{R})[\abs{\cos\alpha}\leq1]\)，
所以\[
	\abs{\sin x - \sin x_0} \leq 2 \abs{\sin\frac{x-x_0}2}.
\]
又因为当\(\alpha=0\)时有\(0=\sin\alpha=\alpha\)，
而当\(\alpha\neq0\)时有\(0\leq\abs{\sin\alpha}<\abs{\alpha}\)，
所以\((\forall\alpha\in\mathbb{R})[\abs{\sin\alpha}\leq\abs{\alpha}]\)，
于是\[
	\abs{\sin x - \sin x_0}
	\leq 2 \abs{\frac{x-x_0}2}
	= \abs{x-x_0}.
\]
对于\(\forall\epsilon>0\)，
取\(\delta=\epsilon\)，
当\(\abs{x-x_0}<\delta\)时，
就有\(\abs{\sin x-\sin x_0}<\epsilon\)，
所以\(\sin x\)在\((-\infty,+\infty)\)上连续.
\end{proof}
\end{example}

类似地可以证明，函数\(f(x) = \cos x\)在区间\((-\infty,+\infty)\)内是连续的.

% \begin{example}
% %@see: 《数学分析（第二版 上册）》（陈纪修） P91 例3.2.4
% 证明：函数\(f(x) = a^x\ (a>0,a\neq1)\)在\((-\infty,+\infty)\)上连续.
% \begin{proof}
% 首先有\[
% 	(\forall x_0\in\mathbb{R})
% 	[a^x-a^{x_0} = a^{x_0}(a^{x-x_0}-1)].
% \]
% 因此，证\(\lim_{x\to x_0} a^x = a^{x_0}\)就归结为证\(\lim_{t\to0} a^t = 1\).
% \end{proof}
% \end{example}

\subsection{连续函数族}
\begin{definition}\label{definition:函数族.连续函数族}
由区间\(I\)上全部的连续函数组成的集合，称作\DefineConcept{连续函数族}，
记作\(C(I)\)，
即\[
	C(I)
	\defeq
	\Set*{
		f\in\mathbb{R}^I
		\given
		(\forall x \in I)
		[\text{\(f\)在点\(x\)连续}]
	}.
\]
\end{definition}

\subsection{单调迭代数列收敛定理}
\begin{theorem}\label{theorem:连续函数.单调迭代数列收敛定理}
%@see: 《数学分析：原理与方法》（胡适耕） P35 4.1.6命题
设\(f\colon D\to\mathbb{R}\)是单调增加的连续函数，
\(x=a\)是方程\(f(x) = x\)在\(D\)内的唯一根.
取\(x_0 \in D \cap (-\infty,a)\)使得\(f(x_0) > x_0\)，
或取\(x_0 \in D \cap (a,+\infty)\)使得\(f(x_0) < x_0\)，
然后构造数列\(\{x_n\}_{n\geq0}\)使之满足递推公式\[
	x_{n+1} = f(x_n)
	\quad(n=1,2,\dotsc),
\]
则\[
	\lim_{n\to\infty} x_n = a.
\]
\begin{proof}
首先利用数学归纳法证明\(\{x_n\}_{n\geq0}\)是单调有界的.

假设\(x_0 \in D \cap (-\infty,a)\)且\(f(x_0) > x_0\)，
那么\(x_1 = f(x_0) > x_0\).
假设\(x_n \geq x_{n-1}\ (n\geq1)\)，
则由\(f\)是单调增加函数可知
\(x_{n+1} = f(x_n) \geq f(x_{n-1}) = x_n\)，
这就说明\(\{x_n\}_{n\geq0}\)是单调增加的.

考虑到\(x_0 < a\)，
于是假设\(x_n \leq a\ (n\geq0)\)，
则\[
	x_{n+1} = f(x_n) \leq f(a) = a.
\]
这就说明\(a\)是\(\{x_n\}_{n\geq0}\)的一个上界.

由\hyperref[theorem:极限.数列的单调有界定理]{单调有界定理}可知，
极限\(\lim_{n\to\infty} x_n = b\)存在且\(b \leq a\).
因为\[
	b = \lim_{n\to\infty} x_{n+1}
	= \lim_{n\to\infty} f(x_n)
	= f(b),
\]
所以必有\(b = a\)，
于是\(\lim_{n\to\infty} x_n = a\).
\end{proof}
\end{theorem}

\subsection{间断点}
\begin{definition}
设函数\(f\)在点\(x_0\)的某去心邻域内有定义.
如果函数\(f\)有下列三种情形之一：
\begin{itemize}
	\item 在\(x=x_0\)没有定义；
	\item 虽在\(x=x_0\)有定义，
	但\(\lim_{x \to x_0} f(x)\)不存在；
	\item 虽在\(x=x_0\)有定义，
	且\(\lim_{x \to x_0} f(x)\)存在，
	但\(\lim_{x \to x_0} f(x) \neq f(x_0)\)，
\end{itemize}
则称“函数\(f\)在点\(x_0\)不连续”，
或称“点\(x_0\)是函数\(f\)的\DefineConcept{间断点}（discontinuity）”.
\end{definition}

如果\(\lim_{x \to x_0} f(x) = \infty\)，
则称点\(x_0\)为“函数\(f\)的\DefineConcept{无穷间断点}（infinite discontinuity）”.
例如，点\(x=0\)是函数\(y=\frac{1}{x}\)的无穷间断点.
%@see: https://mathworld.wolfram.com/InfiniteDiscontinuity.html

如果\(f\)在点\(x_0\)的某一邻域是有界的，
但其左、右极限均不存在，
则称点\(x_0\)为“函数\(f\)的\DefineConcept{振荡间断点}（oscillating discontinuity）”.
% 在 wolfram 网站上没有找到与“振荡间断点”对应的概念，这里的英文单词是我翻译的
例如，点\(x=0\)是函数\(y=\sin\frac{1}{x}\)的振荡间断点.

如果\(\lim_{x \to x_0} f(x) = A\)，
但是\(f\)在点\(x_0\)没有定义，或者\(f(x_0) \neq A\)，
则称点\(x_0\)为“函数\(f\)的\DefineConcept{可去间断点}（removable discontinuity）”.
例如，点\(x=0\)是函数\(y=\frac{\sin x}{x}\)的可去间断点.
%@see: https://mathworld.wolfram.com/RemovableDiscontinuity.html

如果\(f\)在点\(x_0\)的左、右极限存在但不相等，
即\(\lim_{x \to x_0^-} f(x) \neq \lim_{x \to x_0^+} f(x)\)，
则称点\(x_0\)为“函数\(f\)的\DefineConcept{跳跃间断点}（jump discontinuity）”.
%@see: https://mathworld.wolfram.com/JumpDiscontinuity.html

如果\(x_0\)是函数\(f\)的间断点，
但左极限\(f(x_0^-)\)及右极限\(f(x_0^+)\)都存在，
那么\(x_0\)称为“函数\(f\)的\DefineConcept{第一类间断点}（discontinuity of the first kind）”.
不是第一类间断点的间断点，称为\DefineConcept{第二类间断点}（discontinuity of the second kind）.

显然，可去间断点、跳跃间断点是第一类间断点，
无穷间断点、振荡间断点是第二类间断点.

\begin{example}
已知函数\(f(x) = \frac{x-x^3}{\sin \pi x}\)，求该函数的可去间断点的个数.
\begin{solution}
当\(\sin \pi x = 0\)或\(x \in \mathbb{Z}\)时，函数\(f\)无定义；
也就是说，点\(x\in\mathbb{Z}\)都是\(f\)的间断点.
要使点\(x\)成为函数\(f\)的可去间断点，必有\(x-x^3=0\)，解得\(x\in\{-1,0,1\}\).
又因为\begin{gather*}
	\lim_{x\to0} \frac{x-x^3}{\sin \pi x}
	= \lim_{x\to0} \frac{x(1-x^2)}{\pi x}
	= \frac1\pi, \\
	\lim_{x\to1} \frac{x-x^3}{\sin \pi x}
	= \lim_{x\to1} \frac{1-3x^2}{\pi \cos \pi x}
	= \frac2\pi, \\
	\lim_{x\to-1} \frac{x-x^3}{\sin \pi x}
	= \lim_{x\to-1} \frac{1-3x^2}{\pi \cos \pi x}
	= \frac2\pi,
\end{gather*}
综上，函数\(f\)共有3个可去间断点.
\end{solution}
\end{example}

\begin{example}
设函数\(f(x) = \frac{x^2-x}{x^2-1}\sqrt{1+\frac{1}{x^2}}\).
试计算\(f\)的间断点种类及其个数.
\begin{solution}
因为\[
	f(x) = \frac{x(x-1)}{(x-1)(x+1)} \frac{\sqrt{x^2+1}}{\abs{x}},
\]
所以\(f\)的间断点为\(x\in\{-1,0,1\}\).

又因为\begin{align*}
	&\lim_{x\to1} f(x)
	= \lim_{x\to1} \frac{\sqrt{x^2+1}}{x+1}
	= \frac{\sqrt{2}}{2}, \\
	&\lim_{x\to0^+} f(x)
	= \lim_{x\to0^+} \frac{\sqrt{x^2+1}}{x+1}
	= 1, \\
	&\lim_{x\to0^-} f(x)
	= \lim_{x\to0^-} -\frac{\sqrt{x^2+1}}{x+1}
	= -1, \\
	&\lim_{x\to-1} f(x)
	= \lim_{x\to-1} \frac{\sqrt{x^2+1}}{x+1}
	= \infty,
\end{align*}
所以点\(x=1\)是可去间断点，
点\(x=0\)是跳跃间断点，
点\(x=-1\)是无穷间断点.
那么可去间断点、跳跃间断点和无穷间断点的个数均为1个.
\end{solution}
\end{example}

% \subsection{半连续性}
% \begin{definition}
% 设\(f\colon D\to\mathbb{R}\).
% 规定：\[
% 	\begin{split}
% 		\text{\(f\)在点\(x_0\) \DefineConcept{上半连续}}
% 		\defiff
% 			&\text{\(f\)在\(D\)内有上界} \\
% 			&\land
% 			(\forall\epsilon>0)
% 			(\exists\delta>0)
% 			(\forall x \in D)
% 			[
% 				\abs{x-x_0}<\delta
% 				\implies
% 				f(x)<f(x_0)+\epsilon
% 			]; \\
% 		\text{\(f\)在点\(x_0\) \DefineConcept{下半连续}}
% 		\defiff
% 			&\text{\(f\)在\(D\)内有下界} \\
% 			&\land
% 			(\forall\epsilon>0)
% 			(\exists\delta>0)
% 			(\forall x \in D)
% 			[
% 				\abs{x-x_0}<\delta
% 				\implies
% 				f(x)>f(x_0)-\epsilon
% 			].
% 	\end{split}
% \]
% %@see: https://healy.econ.ohio-state.edu/kcb/Ec181/Lecture13.pdf
% \end{definition}
