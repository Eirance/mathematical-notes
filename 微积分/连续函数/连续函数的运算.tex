\section{连续函数的运算}
\subsection{连续函数的四则运算}
\begin{theorem}\label{theorem:极限.连续函数的极限1}
%@see: 《高等数学（第六版 上册）》 P66 定理1
%@see: 《数学分析（第二版 上册）》（陈纪修） P91
设函数\(f\)和\(g\)都在点\(x_0\)连续，
则\begin{itemize}
	\item \(f\)和\(g\)的和（差）\(f \pm g\)在点\(x_0\)连续，即\[
		\lim_{x \to x_0} (f(x) + g(x))
		= f(x_0) + g(x_0);
	\]
	\item \(f\)和\(g\)的积\(f \cdot g\)在点\(x_0\)连续，即\[
		\lim_{x \to x_0} (f(x) \cdot g(x))
		= f(x_0) \cdot g(x_0);
	\]
	\item 如果\(g(x_0)\neq0\)，则\(f\)和\(g\)的商\(\frac{f}{g}\)在点\(x_0\)连续，即\[
		\lim_{x \to x_0} \frac{f(x)}{g(x)}
		= \frac{f(x_0)}{g(x_0)}.
	\]
\end{itemize}
\end{theorem}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P66 例1
因为\[
	\tan x=\frac{\sin x}{\cos x}, \qquad
	\cot x=\frac{\cos x}{\sin x},
\]
而由\cref{example:极限.正弦函数在实数域上连续} 可知，
\(\sin x\)和\(\cos x\)都在区间\((-\infty,+\infty)\)内连续，
故由\cref{theorem:极限.连续函数的极限1} 可知，
\(\tan x\)和\(\cot x\)在它们的定义域内是连续的.
\end{example}

\begin{example}
设函数\(f,g\)在\(x_0\)的某一邻域内有定义，
且\(\lim_{x\to x_0}f(x)\)和\(\lim_{x\to x_0}\frac{f(x)}{g(x)}\)都存在且有限，
而\(\lim_{x\to x_0}g(x)=0\).
证明：\(\lim_{x\to x_0}f(x)=0\).
\begin{proof}
直接计算得\[
	\lim_{x\to x_0}f(x)
	= \lim_{x\to x_0}\left[
		g(x) \cdot \frac{f(x)}{g(x)}
	\right]
	= \lim_{x\to x_0}g(x) \cdot \lim_{x\to x_0}\frac{f(x)}{g(x)}
	= 0 \cdot \lim_{x\to x_0}\frac{f(x)}{g(x)} = 0.
	\qedhere
\]
\end{proof}
\end{example}

\begin{example}\label{example:连续函数的运算.开区间上的单调函数的间断点必为第一类间断点}
%@see: 《数学分析（第二版 上册）》（陈纪修） P94 例3.2.8
区间\((a,b)\)上单调函数的间断点必为第一类间断点.
\begin{proof}
不妨设\(f\)在\((a,b)\)单调增加.
任取\(x_0\in(a,b)\).
显然集合\(A=\Set{ f(x) \given x\in(a,x_0) }\)有上界.
由\hyperref[theorem:实数.确界原理]{确界存在定理}可知，
\(A\)必定存在上确界\(\alpha=\sup A\).
于是\[
	(\forall x\in(a,x_0))
	[f(x)\leq\alpha]
	\land
	(\forall\epsilon>0)
	(\exists x'\in(a,x_0))
	[f(x')>\alpha-\epsilon].
\]
取\(\delta=x_0-x'>0\)，
则当\(-\delta<x-x_0<0\)时，
有\(x'<x<x_0\)，
于是又有\[
	-\epsilon
	< f(x') - \alpha
	\leq f(x) - \alpha
	\leq 0,
\]
这就说明\(\lim_{x \to x_0^-} f(x) = \alpha\).
同理可证\(\lim_{x \to x_0^+} f(x) = \beta\)，
其中\(\beta=\inf\Set{ f(x) \given x\in(x_0,b) }\).
\end{proof}
\end{example}

\subsection{反函数的连续性}
\begin{theorem}\label{theorem:极限.连续函数的极限2}
%@see: 《高等数学（第六版 上册）》 P66 定理2
%@see: 《数学分析（第二版 上册）》（陈纪修） P95 定理3.2.2（反函数连续性定理）
如果函数\(f\in\mathbb{R}^X\)在区间\([a,b]\subseteq X\)上连续且严格单调增加，
那么它的反函数\(f^{-1}\)在\([\alpha,\beta]\)上连续且严格单调增加，
其中\(\alpha=f(a),\beta=f(b)\).
\begin{proof}
首先我们利用\cref{example:连续函数的运算.开区间上的单调函数的间断点必为第一类间断点} 的结论来证明\[
	\ran f
	= \dom f^{-1}
	= f([a,b])
	= [\alpha,\beta].
\]

显然\(\alpha,\beta \in f([a,b])\).
任取\(\gamma\in(\alpha,\beta)\).
记\[
	S \defeq \Set{ x\in[a,b] \given f(x)<\gamma }.
\]
那么集合\(S\)非空且有上界.
由\hyperref[theorem:实数.确界原理]{确界存在定理}可知，
\(S\)必有上确界.
记\(x_0 = \sup S\)，
则\(x_0\in(a,b)\).
由于\(f\)严格单调增加，
当\(x<x_0\)时有\(f(x)<\gamma\)，
当\(x>x_0\)时有\(f(x)>\gamma\).
于是由\cref{example:连续函数的运算.开区间上的单调函数的间断点必为第一类间断点} 得到\[
	f(x_0^-) \leq \gamma \leq f(x_0^+).
\]
由于\(f\)在点\(x_0\)连续，
所以\(f(x_0)
= f(x_0^+)
= f(x_0^-)
= \gamma\).
这就说明\(\ran f = [\alpha,\beta]\).

由于\(f\)严格单调增加，
所以它的反函数\(f^{-1}\)必定存在且同样严格单调增加.

现在只需要证明\(f^{-1}\)在\([\alpha,\beta]\)上连续.

设\(y_0\in(\alpha,\beta)\)，
相应地有\(f^{-1}(y_0)=x_0\in(a,b)\).
对于任意给定的\(\epsilon>0\)，
要找出\(\delta>0\)，
使得当\(\abs{y-y_0}<\delta\)时，
成立\[
	\abs{f^{-1}(y) - f^{-1}(y_0)}
	= \abs{f^{-1}(y) - x_0}
	< \epsilon,
\]
即\[
	x_0 - \epsilon < f^{-1}(y) < x_0 + \epsilon.
\]
令\(y_1 = f(x_0 - \epsilon),
y_2 = f(x_0 + \epsilon)\).
取\(\delta = \min\{y_0 - y_1, y_2 - y_0\} > 0\).
显然当\(\abs{y - y_0} < \delta\)时，
成立\[
	\abs{f^{-1}(y) - f^{-1}(y_0)} < \epsilon.
\]
如果\(y_0 = \alpha\)，
则只要证明右连续性.
如果\(y_0 = \beta\)，
则只要证明左连续性.
\end{proof}
\end{theorem}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P66 例2
由于\(\sin x\)在闭区间\(\left[-\frac{\pi}{2},\frac{\pi}{2}\right]\)上单调增加且连续，
所以它的反函数\(\arcsin x\)在闭区间\([-1,1]\)上也是单调增加且连续的.
同理可证：
\begin{itemize}
	\item \(\arccos x\)在闭区间\([-1,1]\)上单调减少且连续.
	\item \(\arctan x\)在区间\((-\infty,+\infty)\)内单调增加且连续.
	\item \(\arccot x\)在区间\((-\infty,+\infty)\)内单调减少且连续.
\end{itemize}
总之，反三角函数\(\arcsin x,\arccos x,\arctan x,\arccot x\)在它们的定义域内都是连续的.
\end{example}

\subsection{复合函数的连续性}
\begin{theorem}\label{theorem:极限.连续函数的极限3}
%@see: 《高等数学（第六版 上册）》 P66 定理3
%@see: 《数学分析（第二版 上册）》（陈纪修） P96
设\(f\colon X\to Y\)，\(g\colon Y\to\mathbb{R}\)，
\((\exists\rho>0)[\mathring{U}(x_0,\rho) \subseteq \dom(g \circ f)]\)，
\(\lim_{x \to x_0} f(x) = u_0\)，
函数\(g\)在点\(u_0\)连续，
则\[
	\lim_{x \to x_0} g(f(x)) = \lim_{u \to u_0} g(u) = g(u_0).
\]
\end{theorem}

\cref{theorem:极限.连续函数的极限3} 说明，
在其给定条件下，求复合函数\(g \circ f\)的极限时，
外层函数符号\(g\)与极限号\(\lim\)可以交换次序，即\[
	\lim_{x \to x_0} g(f(x))
	= g\left(\lim_{x \to x_0} f(x)\right).
\]

\begin{theorem}\label{theorem:极限.连续函数的极限4}
%@see: 《高等数学（第六版 上册）》 P66 定理4
设\(f\colon X\to Y\)，\(g\colon Y\to\mathbb{R}\)，
\((\exists\rho>0)[U(x_0,\rho) \subseteq \dom(g \circ f)]\)，
函数\(f\)在点\(x_0\)连续，且\(f(x_0) = u_0\)，
而函数\(g\)在点\(u_0\)连续，
则函数\(g \circ f\)在点\(x_0\)也连续.
\end{theorem}

\subsection{初等函数的连续性}
\begin{theorem}
%@see: 《高等数学（第六版 上册）》 P68
基本初等函数在其定义域内都是连续的.
\end{theorem}

\begin{corollary}
%@see: 《高等数学（第六版 上册）》 P68
一切初等函数在其定义区间（即包含在定义域内的区间）内都是连续的.
\end{corollary}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P69 例6
求：\(\lim_{x\to0} \frac{\log_a (1+x)}{x}\).
\begin{solution}
\(\lim_{x\to0} \frac{\log_a (1+x)}{x}
= \lim_{x\to0} \log_a (1+x)^{\frac{1}{x}}
= \log_a \lim_{x\to0} (1+x)^{\frac{1}{x}}
= \log_a e
= \frac{1}{\ln a}\).
\end{solution}
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P69 例7
求：\(\lim_{x\to0} \frac{a^x - 1}{x}\).
\begin{solution}
\(\lim_{x\to0} \frac{a^x - 1}{x}
\xlongequal{t=a^x-1} \lim_{t\to0}\frac{t}{\log_a (1+t)}
= \ln a\).
\end{solution}
\end{example}

\begin{example}
计算极限\(\lim_{x\to0^+} \left(1+\frac1x\right)^x\).
\begin{solution}
直接计算得\[
	\lim_{x\to0^+} \left(1+\frac1x\right)^x
	= \exp\lim_{x\to0^+} x\ln(1+\frac1x) % 连续函数的复合函数
	\xlongequal{t=1/x} \exp\lim_{t\to+\infty} \frac{\ln(1+t)}{t} % 换元
	= \exp\lim_{t\to+\infty} \frac1{1+t} % 洛必达法则
	= 1.
\]
\end{solution}
\end{example}

\begin{example}
%@see: https://www.bilibili.com/video/BV1MF4m1L7Jw
计算极限\(\lim_{x\to+\infty} \left[ \frac1e \left(1+\frac1x\right)^x \right]^x\).
\begin{solution}
直接计算得\begin{align*}
	&\lim_{x\to+\infty} \left[ \frac1e \left(1+\frac1x\right)^x \right]^x
	= \lim_{x\to+\infty} \exp[x^2 \ln(1+\frac1x) - x] \\
	&\xlongequal{t=1/x} \exp\lim_{t\to0^+} \left[ \frac1{t^2} \ln(1+t) - \frac1t \right]
	= \exp\lim_{t\to0^+} \frac{\ln(1+t)-t}{t^2} \\
	&= \exp\lim_{t\to0^+} \frac{t-\frac12t^2+o(t^2)-t}{t^2}
	= \exp(-\frac12)
	= \frac1{\sqrt{e}}.
\end{align*}
\end{solution}
%@Mathematica: Limit[((1 + 1/x)^x/E)^x, x -> Infinity]
\end{example}

\begin{example}
设\(x>0\).
证明：\(\lim_{n\to\infty} n \left( \sqrt[n]{x} - 1 \right) = \ln x\).
%@see: \cref{equation:特殊函数.以e为底的对数函数}
\begin{proof}
%@see: https://math.stackexchange.com/a/2021180/591741
直接计算得\begin{align*}
	\lim_{n\to\infty} n \left( \sqrt[n]{x} - 1 \right)
	&\xlongequal{x = e^t} t \lim_{n\to\infty} \frac{e^{t/n} - 1}{t/n} \\
	&\xlongequal{u=t/n} t \lim_{u\to0} \frac{e^u - 1}u \\
	&= t
	= \ln x.
	\qedhere
\end{align*}
\end{proof}
\end{example}

\begin{proposition}
%@see: 《高等数学（第六版 上册）》 P69 习题1-9 2.
设函数\(f\)和\(g\)在点\(x_0\)连续，
则函数\[
	\phi(x) = \max\{f(x),g(x)\}, \qquad
	\psi(x) = \min\{f(x),g(x)\}
\]在点\(x_0\)也连续.
\begin{proof}
因为\[
	\phi(x)
	= \frac{f(x)+g(x)}{2}+\frac{\abs{f(x)-g(x)}}{2}, \qquad
	\psi(x)
	= \frac{f(x)+g(x)}{2}-\frac{\abs{f(x)-g(x)}}{2},
\]
所以\(\phi(x)\)和\(\psi(x)\)在点\(x_0\)也连续.
\end{proof}
\end{proposition}

\begin{proposition}\label{theorem:幂指函数.幂指函数的极限}
%@see: 《高等数学（第六版 上册）》 P69
设幂指函数\(f\colon X\to\mathbb{R}\)
满足\(f(x) = u(x)^{v(x)}\)，
其中\(u(x)>0\ (x \in X)\)，
而\(\mathcal{B}\)是\(X\)中的基.
\begin{itemize}
	\item 如果\(u(x) \equiv 1\)，
	那么\[
		\lim_\mathcal{B} u(x)^{v(x)} = 1.
	\]

	\item 如果\[
		(\exists B\in\mathcal{B})
		(\forall x \in B)
		[u(x)\neq1],
	\]且\[
		\lim_\mathcal{B} u(x) = a \in (0,+\infty), \qquad
		\lim_\mathcal{B} v(x) = b \in (-\infty,+\infty),
	\]
	那么\[
		\lim_\mathcal{B} u(x)^{v(x)} = a^b.
	\]

	\item 如果\[
		(\exists B\in\mathcal{B})
		(\forall x \in B)
		[u(x)\neq1],
	\]且\[
		\lim_\mathcal{B} u(x) = 1, \qquad
		\lim_\mathcal{B} v(x) = \infty,
	\]
	那么\[
		\lim_\mathcal{B} u(x)^{v(x)}
		= \exp\lim_\mathcal{B} (u(x)-1) v(x).
	\]
\end{itemize}
\end{proposition}

\begin{example}
%@see: 《1996年全国硕士研究生入学统一考试（数学一）》一填空题/第1题
设\(\lim_{x\to\infty} \left( \frac{x+2a}{x-a} \right)^x = 8\)，
求\(a\)的取值范围.
\begin{solution}
由于当\(x\to\infty\)时，
\(\frac{x+2a}{x-a} \to 1\)，
于是\[
	\lim_{x\to\infty} \left( \frac{x+2a}{x-a} \right)^x
	= \exp\lim_{x\to\infty} \frac{3a}{x-a} \cdot x
	= e^{3a}
	= 8 = e^{\ln8} = e^{3\ln2},
\]
易知\(a = \ln2\).
\end{solution}
\end{example}

\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P107 例3.3.12
计算极限\(\lim_{x\to0} (\cos x)^{\frac1{x^2}}\).
\begin{solution}
由于当\(x\to0\)时，
\(\cos x \to 1\)而\(\frac1{x^2} \to \infty\)，
于是\[
	\lim_{x\to0} (\cos x)^{\frac1{x^2}}
	= \exp\lim_{x\to0} (\cos x - 1) \cdot \frac1{x^2}
	%\cref{equation:函数极限.重要极限8}
	= \exp\lim_{x\to0} \left( -\frac12 x^2 \right) \frac1{x^2}
	= e^{-\frac12}.
\]
% 直接计算得\[
% 	\lim_{x\to0} (\cos x)^{\frac1{x^2}}
% 	= \lim_{x\to0} [1-(1-\cos x)]^{\frac1{x^2}}
% 	= \lim_{x\to0} \left(1-\frac{x^2}2\right)^{\frac1{x^2}}
% 	= \frac1{\sqrt{e}}.
% \]
\end{solution}
\end{example}

\begin{example}
%@see: 《2022年全国硕士研究生入学统一考试（数学二）》二填空题/第11题
计算极限\(\lim_{x\to0} \left( \frac{1+e^x}2 \right)^{\cot x}\).
\begin{solution}
由于当\(x\to0\)时，
\(\frac{1+e^x}2 \to 1\)而\(\cot x \to \infty\)，
于是\[
	\lim_{x\to0} \left( \frac{1+e^x}2 \right)^{\cot x}
	= \exp\lim_{x\to0} \frac{e^x-1}2 \cdot \frac1{\tan x}
	= \exp\lim_{x\to0} \frac{x}2 \cdot \frac1x
	= e^{\frac12}.
\]
\end{solution}
\end{example}

\begin{proposition}
设幂指函数\(f\colon X\to\mathbb{R}\)
满足\(f(x) = (1+\alpha(x))^{\beta(x)}\)，
其中\(\alpha(x)>-1\ (x \in X)\)，
而\(\mathcal{B}\)是\(X\)中的基.
如果\[
	(\exists B\in\mathcal{B})
	(\forall x \in B)
	[\alpha(x)\neq0],
\]
且\[
	\lim_\mathcal{B} \alpha(x) = 0,
	\qquad
	\lim_\mathcal{B} \alpha(x) \beta(x) = 0,
\]
则\[
	\lim_\mathcal{B} \frac{(1+\alpha(x))^{\beta(x)}-1}{\alpha(x) \beta(x)} = 1.
\]
\begin{proof}
由于\(\alpha\to0\)，
所以\(\ln(1+\alpha) = \alpha + o(\alpha)\)，
从而有\[
	(1+\alpha)^{\beta}
	= \exp[\beta \ln(1+\alpha)]
	= \exp[\beta (\alpha + o(\alpha))].
\]
又因为\(\alpha \beta \to 0\)，
所以\(o(\alpha) \beta \to 0\)，
故有\[
	\exp[\beta (\alpha + o(\alpha))] - 1
	\sim \beta (\alpha + o(\alpha)),
\]
于是\begin{align*}
	\lim_\mathcal{B} \frac{(1+\alpha)^{\beta}-1}{\alpha \beta}
	&= \lim_\mathcal{B} \frac{\exp[\beta (\alpha + o(\alpha))]-1}{\alpha \beta} \\
	&= \lim_\mathcal{B} \frac{\beta (\alpha + o(\alpha))}{\alpha \beta} \\
	&= \lim_\mathcal{B} \frac{\alpha + o(\alpha)}{\alpha}
	= 1.
	\qedhere
\end{align*}
\end{proof}
\end{proposition}
