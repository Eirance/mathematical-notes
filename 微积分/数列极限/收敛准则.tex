\section{收敛准则}
\subsection{单调有界数列收敛定理}
由\cref{theorem:极限.收敛数列的有界性} 可知，收敛的数列一定有界.
但是，我们也知道，有界的数列不一定收敛，例如\[
	\{ x_n = \sin n \}, \qquad
	\{ y_n = (-1)^n \}.
\]
于是我们有这样两个问题：
对有界数列加上什么条件，就可以保证它必定收敛？
不对有界数列加任何条件，我们可以得到怎样的（比收敛稍弱一些的）结论？

我们先来回答第一个问题：
如果数列不仅有界，而且是单调的，那么这数列一定收敛，
其极限就是它的值域的上确界或下确界.

\begin{theorem}\label{theorem:极限.数列的单调有界定理}
%@see: 《高等数学（第六版 上册）》 P52 准则II
%@see: 《数学分析（第二版 上册）》（陈纪修） P52 定理2.4.1
%@see: 《数学分析：原理与方法》（胡适耕） P33 4.1.3定理
单调有界数列必有极限.
\begin{proof}
不妨设数列\(\{a_n\}\)是单调增加的，
即\[
	a_n \leq a_{n+1},
	\quad n=1,2,\dotsc;
	\eqno(1)
\]
又设\(\{a_n\}\)有界，
且\[
	\abs{a_n} < c,
	\quad n=1,2,\dotsc.
	\eqno(2)
\]

现在我们把连续统分成两个集合\(A\)和\(B\)，
把大于所有\(a_n\)的任何实数（例如数\(c\)）放入集合\(B\)，
而把其余的所有实数放入\(A\)，即取\[
	B = \Set{ x \in \mathbb{R} \given x > a_n\ (n=1,2,\dotsc) },
	\eqno(3)
\]\[
	A = \mathbb{R} - B.
	\eqno(4)
\]
显然\(\Set{A,B}\)是\(\mathbb{R}\)的一个分割.
设\(\alpha\)是这个分割的界限，
那么必有\[
	a_n \leq \alpha,
	\quad n=1,2,\dotsc;
	\eqno(5)
\]
这是因为假设这个数列的某一项\(a_m\)满足\(a_m > \alpha\)，
依照界限的定义会有\(a_m \in B\)，而这与\(B\)的定义式(3)矛盾.

假设“\(\alpha\)不是\(\{a_n\}\)的极限”，
根据数列发散的定义，\[
	(\exists\epsilon>0)
	(\forall n\in\mathbb{N}^+)
	(\exists n_0>n)
	[\abs{a_{n_0} - \alpha} > \epsilon]
\]成立；
由(5)可知，\(\abs{a_{n_0} - \alpha} = \alpha - a_{n_0}\)；
又因为\(\{a_n\}\)是单调增加的，
所以\(a_{n_0} \geq a_n\)，
\(-a_{n_0} \leq -a_n\)，
\(\alpha - a_{n_0} \leq \alpha - a_n\).
因此，\(\exists\epsilon>0\)，对\(\forall n\in\mathbb{N}^+\)，都有\[
	\alpha - a_n > \epsilon
	\quad\text{或}\quad
	a_n < \alpha - \epsilon.
	\eqno(6)
\]
结合集合\(B\)的定义(3)，
由(6)便得\(\alpha - \epsilon \in B\)；
但由\(\alpha - \epsilon < \alpha\)可知，应该有\((\alpha - \epsilon) \in A\)；
矛盾！因此假设不成立，\(\alpha\)就是数列\(\{a_n\}\)的极限，
即\(\lim_{n\to\infty} a_n = \alpha\).
\end{proof}
\end{theorem}
\begin{remark}
在\cref{theorem:极限.数列的单调有界定理} 的证明中，
我们有\(-c < a_n < c\ (n=1,2,\dotsc)\)，
那么根据\cref{theorem:极限.收敛数列的保序性2}
不难得知\[
	-c \leq \lim_{n\to\infty} a_n \leq c.
\]
\end{remark}

按极限的定义证明一个数列收敛必须提前知道它的极限是什么.
这个要求对于许多实际情况来说并不现实，
我们往往无法事先得知收敛数列的极限.
\cref{theorem:极限.数列的单调有界定理} 使得我们可以从数列本身出发去研究其敛散性，
在确定数列数列收敛以后，再利用极限运算的性质去求出相应的极限.

\begin{definition}
%@see: 《数学分析习题课讲义（第2版 上册）》（谢惠民、恽自求、易法槐、钱定边） P49 命题2.6.1（第一律）
设函数\(f\colon D\to\mathbb{R}\).
若点\(x_0 \in D\)满足\[
	f(x_0) = x_0,
\]
则称“\(x_0\)是\(f\)的\DefineConcept{不动点}”.
\end{definition}
\begin{proposition}\label{theorem:数列极限.迭代数列.第一律}
%@see: 《数学分析习题课讲义（第2版 上册）》（谢惠民、恽自求、易法槐、钱定边） P49 命题2.6.1（第一律）
设数列\(\{x_n\}_{n\geq1}\)满足递推公式\(x_{n+1} = f(x_n)\ (n\in\mathbb{N}^+)\).
若有\[%equation:数列极限.迭代数列.第一律.条件1
	\lim_{n\to\infty} x_n = x_0,
\]和\begin{equation}\label{equation:数列极限.迭代数列.第一律.条件2}
	\lim_{n\to\infty} f(x_n) = f(x_0),
\end{equation}
则\(x_0\)是\(f\)的的不动点.
\begin{proof}
在递推公式等号两边同时求极限，令\(n\to\infty\)，
得\[
	x_0 = \lim_{n\to\infty} x_{n+1} = \lim_{n\to\infty} f(x_n) = f(x_0).
	\qedhere
\]
\end{proof}
\end{proposition}
\begin{remark}
\cref{equation:数列极限.迭代数列.第一律.条件2} 可以加强为
“\(f\)在点\(x_0\)~\emph{连续}”
（参考\cref{theorem:连续函数.函数连续点与海涅定理的关系,theorem:连续函数.单调迭代数列收敛定理}）.
\cref{theorem:数列极限.迭代数列.第一律} 用处在于：
即便我们不知道数列是否收敛，也可以先去求解方程\(f(x) = x\).
而求出方程的根对于判定数列\(\{x_n\}_{n\geq1}\)的收敛性往往是有帮助的.
例如，如果方程\(f(x) = x\)在实数范围内无解，
就可以直接断定：满足\(x_{n+1} = f(x_n)\)的数列\(\{x_n\}_{n\geq1}\)一定是发散的.
\end{remark}
\begin{proposition}\label{theorem:数列极限.迭代数列.第二律}
%@see: 《数学分析习题课讲义（第2版 上册）》（谢惠民、恽自求、易法槐、钱定边） P49 命题2.6.2（第二律）
设数列\(\{x_n\}_{n\geq1}\)满足\(x_{n+1} = f(x_n)\ (n\in\mathbb{N}^+)\)，
其中\(f\colon D\to\mathbb{R}\)是单调函数，
且\(\{x_n\}_{n\geq1}\)的值域为\(D\).
\begin{itemize}
	\item 当\(f\)单调增加时，\(\{x_n\}_{n\geq1}\)是单调数列.
	\item 当\(f\)单调减少时，\(\{x_n\}_{n\geq1}\)不是单调数列，
	但它的奇子列\(\{x_{2k-1}\}_{k\geq1}\)和偶子列\(\{x_{2k}\}_{k\geq1}\)都是单调数列，
	且具有相反的单调性.
\end{itemize}
\begin{proof}
假设\(f\)单调增加.
由给定条件有\(x_n \in D\ (n\geq1)\).
如果\(x_2 \geq x_1\)，
那么\[
	x_3 = f(x_2) \geq f(x_1) = x_2,
\]
利用数学归纳法可证\(x_{n+1} \geq x_n\)对\(n\geq1\)成立，
数列\(\{x_n\}_{n\geq1}\)单调增加.
同理，如果\(x_2 \leq x_1\)，
那么数列\(\{x_n\}_{n\geq1}\)单调减少.

假设\(f\)单调减少.
由\cref{theorem:函数.两个严格单调减少函数的复合严格单调增加} 可知，
复合函数\(f \circ f\)单调增加，
这就是说，只要有\[
	a,b,f(a),f(b) \in D,
	\quad\text{且}\quad
	a<b,
\]
就有\[
	f(f(a)) \leq f(f(b)).
\]
如果\(x_1 = x_3\)，则奇子列\(\{x_{2k-1}\}_{k\geq1}\)是常数列.
如果\(x_1 < x_3\)，
由\(f\)单调减少可知\[
	x_2 = f(x_1) \geq f(x_3) = x_4,
\]
然后推出\[
	x_3 = f(x_2) \leq f(x_4) = x_5.
\]
用数学归纳法可证奇子列\(\{x_{2k-1}\}_{k\geq1}\)单调增加，
偶子列\(\{x_{2k}\}_{k\geq1}\)单调减少.
对于\(x_1>x_3\)的讨论完全类似，从略.
\end{proof}
\end{proposition}
\begin{remark}
从\cref{theorem:数列极限.迭代数列.第二律} 的证明过程中不难看出，
当\(f\)单调增加时，若\(\{x_n\}_{n\geq1}\)单调增加，
只有两种可能情形：
要么\(\{x_n\}_{n\geq1}\)从某项起成为常数列（每一项都是\(f\)的不动点），
要么\(\{x_n\}_{n\geq1}\)是严格单调增加数列.
\(\{x_n\}_{n\geq1}\)单调减少的情况类似.

另外，我们还可以得出结论：
如果数列\(\{x_n\}_{n\geq1}\)的值域包含于函数\(f\)的单调区间\(D\)，
即\(x_n \in D\ (n=1,2,\dotsc)\)，
且\(\{x_n\}_{n\geq1}\)有界（\(D\)可以是无界的），
那么当\(f\)单调增加时，数列\(\{x_n\}_{n\geq1}\)必定收敛；
当\(f\)单调减少时，数列\(\{x_n\}_{n\geq1}\)可能收敛，也可能发散，
但它的两个子列\(\{x_{2k-1}\}_{k\geq1}\)和\(\{x_{2k}\}_{k\geq1}\)必定收敛，
于是\(\{x_n\}_{n\geq1}\)是否收敛取决于
\(\{x_{2k-1}\}_{k\geq1}\)和\(\{x_{2k}\}_{k\geq1}\)的极限是否相等.
对于数列\(\{x_n\}_{n\geq1}\)无界的情况，可以作出类似的讨论.
%TODO 类似的讨论是什么意思？
\end{remark}

\begin{example}
%@see: 《计算机组成原理（第3版）》（唐朔飞） P11
设\(a\geq0\)，
数列\(\{x_n\}\)满足\(x_{n+1} = \frac12\left(x_n+\frac{a}{x_n}\right)\ (n=1,2,\dotsc)\).
证明：只要首项\(x_1>0\)，数列\(\{x_n\}\)总是收敛，并求它的极限.
\begin{solution}
先设\(x_1=\sqrt{a}\).
于是\[
	x_2 = \frac12 \left(x_1+\frac{a}{x_1}\right)
	= \sqrt{a},
\]
利用数学归纳法易证\(x_n = \sqrt{a}\ (n=1,2,\dotsc)\)，
于是\(\{x_n\}\)是常数列，
\(\lim_{n\to\infty} x_n = \sqrt{a}\).

再设\(x_1\neq\sqrt{a}\)且\(x_1>0\).
既然\(x_1>0\)，利用数学归纳法容易证明\(x_n>0\ (n=1,2,\dotsc)\)，
于是可以利用\hyperref[theorem:不等式.基本不等式2推论1]{均值不等式}得到\[
	x_2
	= \frac12\left(x_1+\frac{a}{x_1}\right)
	> \sqrt{x_1 \cdot \frac{a}{x_1}}
	= \sqrt{a},
\]
利用数学归纳法易证\(x_n > \sqrt{a}\ (n=2,3,\dotsc)\)，
数列\(\{x_n\}\)有界.
又因为\(x_n^2 > a\ (n=2,3,\dotsc)\)，
所以\begin{align*}
	x_{n+1}-x_n
	&= \frac12 \left(\frac{a}{x_n}-x_n\right)
	= \frac{a-x_n^2}{2x_n}
	< 0
	\quad(n=2,3,\dotsc).
\end{align*}
数列\(\{x_n\}\)从第二项开始严格单调减少.
由\hyperref[theorem:极限.数列的单调有界定理]{单调有界定理}可知数列\(\{x_n\}\)收敛.
假设\(\lim_{n\to\infty} x_n = x\).
在等式\(x_{n+1} = \frac12\left(x_n+\frac{a}{x_n}\right)\)
两边同时求极限，
得到方程\(x = \frac12\left(x+\frac{a}{x}\right)\)，
解得\(x = \sqrt{a}\).
%@credit: {5f4d2f8a-fc8b-4798-85d6-98670f6761e7},{ce603838-a24d-4616-9395-d7b223e8cb72},{6c964576-9569-472e-969e-54699e35974b}
\end{solution}
\end{example}

\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P53 例2.4.1
设数列\(\{x_n\}\)满足\(x_1>0\)，且有递推公式\(x_{n+1}=1+\frac{x_n}{1+x_n}\ (n=1,2,\dotsc)\).
证明：\(\{x_n\}\)收敛，并求它的极限.
\begin{solution}
首先，应用数学归纳法可以直接得到\(1<x_n<2\ (n\geq2)\).
然后由递推公式可得\[
	x_{n+1}-x_n = \frac{x_n-x_{n-1}}{(1+x_n)(1+x_{n-1})}.
\]
这说明，对于\(\forall n\geq2\)，\(x_{n+1}-x_n\)具有相同的符号，从而\(\{x_n\}\)是单调数列.
由\cref{theorem:极限.数列的单调有界定理} 可知，\(\{x_n\}\)收敛.

设\(\{x_n\}\)的极限是\(a\).
在递推公式等号两边同时求极限，
得到方程\[
	a = 1 + \frac{a}{1+a},
\]
解得\(a = \frac{1\pm\sqrt5}2\).
由\(x_n>0\)，舍去负值，即有\(\lim_{n\to\infty} x_n = \frac{1+\sqrt5}2\).
\end{solution}
\end{example}

\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P53 例2.4.2
设数列\(\{x_n\}\)满足\(0<x_1<1\)，且有递推公式\(x_{n+1}=x_n(1-x_n)\ (n=1,2,\dotsc)\).
证明：\(\{x_n\}\)收敛，并求它的极限.
\begin{solution}
应用数学归纳法，可以得到\(0<x_n<1\ (n=1,2,\dotsc)\).
然后由递推公式可得\[
	x_{n+1}-x_n = -x_n^2 < 0.
\]
这说明\(\{x_n\}\)单调减少有下界.
由\cref{theorem:极限.数列的单调有界定理} 可知，\(\{x_n\}\)收敛.

设\(\{x_n\}\)的极限是\(a\).
在递推公式等号两边同时求极限，
得到方程\[
	a=a(1-a),
\]
解得\(a=0\).
于是\(\lim_{n\to\infty} x_n = 0\).
\end{solution}
\end{example}

\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P54 例2.4.3
设数列\(\{x_n\}\)满足\(x_1=\sqrt2\)，且有递推公式\(x_{n+1}=\sqrt{3+2x_n}\ (n=1,2,\dotsc)\).
证明：\(\{x_n\}\)收敛，并求它的极限.
\begin{solution}
对\(0<x_1=\sqrt2<3\)应用数学归纳法可得\(0<x_n<3\ (n=1,2,\dotsc)\).
然后由递推公式可得\[
	x_{n+1}-x_n = \sqrt{3+2x_n} - x_n
	= \frac{(3-x_n)(1+x_n)}{\sqrt{3+2x_n}+x_n}
	> 0,
\]
这说明\(\{x_n\}\)单调增加且有上界.
由\cref{theorem:极限.数列的单调有界定理} 可知，\(\{x_n\}\)收敛.
设\(\{x_n\}\)的极限是\(a\).
在递推公式等号两边同时求极限，
得到方程\[
	a=\sqrt{3+2a},
\]
解得\(a\in\{3,-1\}\).
由\(x_n>0\)，舍去负值，即有\(\lim_{n\to\infty} x_n = 3\).
\end{solution}
\end{example}

\begin{example}
%@see: https://www.bilibili.com/video/BV1hhtHegEnf
设数列\(\{x_n\}\)满足\(x_1=1\)，且有递推公式\(x_n=x_{n+1}+2\ln(1+x_{n+1})\ (n=1,2,\dotsc)\).
\begin{itemize}
	\item 证明\(\lim_{n\to\infty} x_n\)存在，并计算它的值.
	\item 证明\(\lim_{n\to\infty} 2^n x_n\)存在，并计算它的值.
\end{itemize}
\begin{solution}
首先利用数学归纳法证明\(\{x_n\}\)有下界.
注意到\(x_1=1>0\).
假设\(x_k>0\ (k=1,2,\dotsc)\).
用反证法，假设\(x_{k+1}\leq0\)，则\(\ln(1+x_{k+1})\leq0\)，
从而有\(x_k=x_{k+1}+2\ln(1+x_{k+1})\leq0\)，矛盾，于是\(x_{k+1}>0\).
由上可知，\(0\)是数列\(\{x_n\}\)的一个下界.
又因为\[
	x_n-x_{n+1}=2\ln(1+x_{n+1})>0
	\quad(n=1,2,\dotsc),
\]
数列\(\{x_n\}\)严格单调减少，
所以由单调有界定理可知数列\(\{x_n\}\)收敛.
不妨设\(\lim_{n\to\infty} x_n = x\)，
再对递推公式令\(n\to\infty\)
得\(x=x+2\ln(1+x)\)，
解得\(x = \lim_{n\to\infty} x_n = 0\).

因为\[
	\frac{2^{n+1} x_{n+1}}{2^n x_n}
	= 2~\frac{x_{n+1}}{x_n} % 代入递推公式
	= 2~\frac{x_{n+1}}{x_{n+1}+2\ln(1+x_{n+1})} % \(\{x_n\}\)是无穷小，可以进行等价替换
	\to \frac23 < 1
	\quad(n\to\infty),
\]
所以由\cref{theorem:无穷级数.正项级数的比值审敛法}
可知正项级数\(\sum_{n=1}^\infty 2^n x_n\)收敛，
再由\cref{theorem:无穷级数.级数收敛的必要条件}
可知\(\lim_{n\to\infty} 2^n x_n\)收敛.
\end{solution}
\end{example}

\begin{example}
%@see: https://www.bilibili.com/video/BV1cg2rY3E6L/
设数列\(\{x_n\}\)满足\(\ln x_n + \frac1{x_{n+1}} \leq 1\).
证明：\(\lim_{n\to\infty} x_n\)存在，并计算它的值.
\begin{solution}
记\(f(x) = \ln x + \frac1x\ (x>0)\)，
求导得\(f'(x) = \frac1x - \frac1{x^2} = \frac{x-1}{x^2}\)，
可见\(f\)在\((0,1)\)上单调减少，在\([1,+\infty)\)上单调增加，
在\(x=1\)取得最小值\(f(1) = 1\)，
故对\(\forall x>0\)成立\[
	f(x) \geq 1.
	\eqno(1)
\]
在(1)式中用\(x_n\)代\(x\)，并由题设可知\[
	\ln x_n + \frac1{x_{n+1}}
	\leq 1
	\leq f(x_n)
	= \ln x_n + \frac1{x_n},
\]
在不等号两边消去\(\ln x_n\)得\[
	\frac1{x_{n+1}} \leq \frac1{x_n},
	\quad\text{即}\quad
	x_n \leq x_{n+1},
\]
数列\(\{x_n\}\)单调增加.
又因为\[
	\ln x_n
	\leq \ln x_n + \frac1{x_{n+1}}
	\leq 1,
\]
所以\(x_n \leq e\)，
数列\(\{x_n\}\)有上界.
由单调有界定理可知数列\(\{x_n\}\)收敛.
不妨设\(\lim_{n\to\infty} x_n = A\).
对不等式\(\ln x_n + \frac1{x_{n+1}} \leq 1\)
令\(n\to\infty\)得\[
	1 \leq f(A) = \ln A + \frac1A \leq 1,
\]
于是\(f(A) = 1\)，而\(A\)只能等于\(1\)，
即\(\lim_{n\to\infty} x_n = 1\).
\end{solution}
\end{example}

\subsection{无理数\texorpdfstring{$\pi$}{\textpi}}\label{section:极限.无理数pi}
设单位圆内接正\(n\)边形的半周长为\(L_n\)，
则\(L_n = n \sin\frac{180^\circ}{n}\).
%@see: 《数学分析（第二版 上册）》（陈纪修） P56 例2.4.5
令\(t=\frac{180^\circ}{n(n+1)}\).
当\(n\geq3\)时，\(nt\leq45^\circ\).
于是\[
	\tan nt
	= \frac{\tan(n-1)t + \tan t}{1 - \tan(n-1)t \tan t}
	\geq \tan(n-1)t + \tan t
	\geq \dotsb \geq n \tan t,
\]
从而\[
	\sin(n+1)t = \sin nt \cos t + \cos nt \sin t
	= \sin nt \cos t \left(1 + \frac{\tan t}{\tan nt}\right)
	\leq \frac{n+1}n \sin nt.
\]
所以，当\(n\geq3\)时，
\(L_n = n \sin\frac{180^\circ}{n}
\leq (n+1) \sin\frac{180^\circ}{n+1} = L_{n+1}\).

另一方面，单位圆内接正\(n\)边形的面积\[
	S_n = n \sin\frac{180^\circ}{n} \cos\frac{180^\circ}{n} < 4.
\]
因此，当\(n\geq3\)时，
\(L_n = n \sin\frac{180^\circ}{n}
< 4 \left(\cos\frac{180^\circ}{n}\right)^{-1}
\leq \frac4{\cos60^\circ}
= 8\).

综上所述，数列\(\{L_n\}\)单调增加且有上界，因此收敛.
我们把\(\lim_{n\to\infty} L_n\)称为圆周率，记作\(\pi\)，
即\[
	\pi \defeq \lim_{n\to\infty} n \sin\frac{180^\circ}{n}.
\]

%证明\(\pi\)是无理数：
%@see: https://mathscholar.org/2018/09/simple-proofs-the-irrationality-of-pi/
%@see: https://math.stackexchange.com/questions/2588293/a-simple-proof-that-pi-is-irrational-by-ivan-niven
%@see: https://proofwiki.org/wiki/Pi_is_Irrational
%@see: https://www.bilibili.com/read/cv7988106/

\subsection{无理数\texorpdfstring{$e$}{e}}\label{section:极限.无理数e}
设\(x_n=\left(1+\frac1n\right)^n,
y_n=\left(1+\frac1n\right)^{n+1}\).
我们接下来证明数列\(\{x_n\}\)单调增加，
数列\(\{y_n\}\)单调减少，
且两者收敛于同一个极限.

由\hyperref[theorem:不等式.基本不等式n几何平均数与算术平均数]{基本不等式}可得\[
	x_n = \left(1+\frac1n\right)^n \cdot 1
	\leq \left[\frac{n\left(1+\frac1n\right)+1}{n+1}\right]^{n+1} = x_{n+1},
\]
和\[
	\frac1{y_n} = \left(\frac{n}{n+1}\right)^{n+1} \cdot 1
	\leq \left[\frac{(n+1)\frac{n}{n+1}+1}{n+2}\right]^{n+2} = \frac1{y_{n+1}}.
\]
可见\(\{x_n\}\)单调增加，\(\{y_n\}\)单调减少.
又因为\[
	2 = x_1 \leq x_n < y_n \leq y_1 = 4,
\]
所以\(\{x_n\},\{y_n\}\)都收敛.
因为\(y_n=x_n\left(1+\frac1n\right)\)，
所以\(\{x_n\},\{y_n\}\)具有相同的极限.

我们习惯上用字母\(e\)表记极限\(\lim_{n\to\infty} \left(1+\frac1n\right)^n\)，
把它称为\DefineConcept{纳皮尔--欧拉常数}（Napier--Euler Constant）.
它在数值上近似等于{2.718~282}.
%@Mathematica: N[E, 7]
%@see: https://mathworld.wolfram.com/e.html

可以验证：\begin{gather}
	e^x = \lim_{n\to\infty} \left(1+\frac{x}{n}\right)^n,
	\label{equation:特殊函数.以e为底的指数函数} \\
	\ln x = \lim_{n\to\infty} n \left( \sqrt[n]{x} - 1 \right).
	\label{equation:特殊函数.以e为底的对数函数}
\end{gather}

\subsection{闭区间套定理}
\begin{definition}\label{definition:极限.闭区间套的定义}
%@see: 《数学分析（第二版 上册）》（陈纪修） P60 定义2.4.1
闭区间序列\(\{[a_n,b_n]\}\)如果满足\begin{itemize}
	\item \([a_{n+1},b_{n+1}] \subseteq [a_n,b_n]\ (n=1,2,\dotsc)\)；
	\item \(\lim_{n\to\infty} (b_n - a_n) = 0\)，
\end{itemize}
就称该序列为\DefineConcept{闭区间套}（nested intervals）.
\end{definition}

\begin{theorem}[闭区间套定理]\label{definition:极限.闭区间套定理}
%@see: 《数学分析（第二版 上册）》（陈纪修） P60 定理2.4.2
如果序列\(\{[a_n,b_n]\}\)是闭区间套，
那么\[
	(\exists!\xi\in\mathbb{R})
	\left[
		\xi \in \bigcap_{i=1}^\infty [a_i,b_i]
		\land
		\lim_{n\to\infty} a_n = \lim_{n\to\infty} b_n = \xi
	\right].
\]
\begin{proof}
根据闭区间套的定义，我们有\[
	a_1 \leq a_2 \leq \dotsb \leq a_{n-1} \leq a_n
	< b_n \leq b_{n-1} \leq \dotsb \leq b_2 \leq b_1.
\]
显然数列\(\{a_n\}\)单调增加且有上界\(b_1\)，
数列\(\{b_n\}\)单调减少而有下界\(\{a_1\}\).
根据\hyperref[theorem:极限.数列的单调有界定理]{数列的单调有界定理}，
\(\{a_n\}\)与\(\{b_n\}\)都收敛.

设\(\lim_{n\to\infty} a_n = \xi\)，
则\[
	\lim_{n\to\infty} b_n
	= \lim_{n\to\infty} [(b_n - a_n) + a_n]
	= \lim_{n\to\infty} (b_n - a_n) + \lim_{n\to\infty} a_n
	= \xi.
\]
由于\(\xi\)是\(\{a_n\}\)的值域的上确界，
也是\(\{b_n\}\)的值域的下确界，
于是有\(a_n \leq \xi \leq b_n\ (n=1,2,\dotsc)\)，
即\(\xi\)属于所有的闭区间\([a_n,b_n]\).
假设另有实数\(\eta\)属于所有的闭区间\([a_n,b_n]\)，
则也有\(a_n \leq \eta \leq b_n\ (n=1,2,\dotsc)\).
令\(n\to\infty\)，
由\hyperref[theorem:数列极限.夹逼准则]{夹逼准则}得到\(\eta=\lim_{n\to\infty} a_n=\xi\).
这就说明满足结论的实数\(\xi\)是唯一的.
\end{proof}
\end{theorem}

需要指出，如果将\cref{definition:极限.闭区间套定理} 条件中的闭区间套改为开区间套，
则数列\(\{a_n\},\{b_n\}\)依然收敛于同一个极限\(\xi\)，
但是这个\(\xi\)可能不属于任何一个开区间\((a_n,b_n)\).
例如，令\(a_n = 0, b_n = \frac1n\)，
易见\(\lim_{n\to\infty} a_n = \lim_{n\to\infty} b_n = 0\)，
但是\(0\)不属于任何一个开区间\((a_n,b_n)\).

\subsection{子列极限}
上、下极限是数列极限的必要组成部分，
它们各有三种等价的描述方式，
或者说三种等价的定义.
给定一种定义后，
其余两种定义的内容可以命题或定理的形式得到证明.

\begin{definition}
若数列\(\{x_n\}\)的子列\(\{x_{n_k}\}\)满足\[
	\lim_{k\to\infty} x_{n_k} = \xi,
\]
则称数\(\xi\)为“数列\(\{x_n\}\)的\DefineConcept{子列极限}%
（或\DefineConcept{极限点}（limit point）、\DefineConcept{聚点}）”.
\end{definition}

\begin{theorem}\label{theorem:子列极限.数列收敛的充分必要条件}
%@see: 《高等数学（第六版 上册）》 P30 定理4
%@see: 《数学分析（第二版 上册）》（陈纪修） P62 定理2.4.4
如果数列\(\{x_n\}\)收敛于\(a\)，
那么它的任一子列也收敛于\(a\).
\begin{proof}
设数列\(\{x_{n_k}\}\)是数列\(\{x_n\}\)的任一子数列.
由于\(\lim_{n\to\infty}x_n = a\)，
故\(\forall \epsilon > 0\)，
\(\exists N \in \mathbb{N}^+\)，
当\(n > N\)时，
\(\abs{x_n - a} < \epsilon\)成立.
取\(K = N\)，
则当\(k > K\)时，
由\(n_k > n_K \geq N\)
得\(\abs{x_{n_k} - a} < \epsilon\)，
也就是说\(\lim_{k\to\infty}x_{n_k} = a\).
\end{proof}
\end{theorem}

\cref{theorem:子列极限.数列收敛的充分必要条件} 经常被用来判断一个数列是否发散.
\begin{corollary}\label{theorem:子列极限.具有不同子列极限的数列必定发散}
%@see: 《高等数学（第六版 上册）》 P30
%@see: 《数学分析（第二版 上册）》（陈纪修） P62 推论
如果数列\(\{x_n\}\)的两个子列收敛于不同的极限，那么数列\(\{x_n\}\)是发散的.
\end{corollary}

\begin{example}\label{example:极限.负1的次幂组成的数列发散}
%@see: 《高等数学（第六版 上册）》 P30
数列\(\{x_n=(-1)^{n+1}\}\)的子数列\(\{x_{2k-1}\}\)收敛于\(1\)，
而其子数列\(\{x_{2k}\}\)收敛于\(-1\)，因此数列\(\{x_n\}\)是发散的.
同时这个例子也说明，一个发散的数列也可能有收敛的子数列.
\end{example}

\subsection{上极限与下极限}
我们介绍两种特殊的子列极限.
\begin{definition}
数列\(\{x_n\}\)的最小子列极限称为“数列\(x_n\)的\DefineConcept{下极限}”，
记作\[
	\varliminf_{n\to\infty} x_n
	\quad\text{或}\quad
	\liminf_{n\to\infty} x_n.
\]
\end{definition}

\begin{definition}
数列\(\{x_n\}\)的最大子列极限称为“数列\(x_n\)的\DefineConcept{上极限}”，
记作\[
	\varlimsup_{n\to\infty} x_n
	\quad\text{或}\quad
	\limsup_{n\to\infty} x_n.
\]
\end{definition}
上面对上下极限的定义可以利用“\(\epsilon-N\)语言”更加简洁精确地重新定义为\begin{align*}
	\varliminf_{n\to\infty} x_n = \alpha
	&\defiff
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n\in\mathbb{N})
	[
		n>N
		\implies
		\alpha-\epsilon < x_n
	]; \\
	\varlimsup_{n\to\infty} x_n = \beta
	&\defiff
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n\in\mathbb{N})
	[
		n>N
		\implies
		x_n < \beta+\epsilon
	].
\end{align*}

\begin{theorem}\label{theorem:极限.上下极限的等价定义1}
数列\(\{x_n\}\)的上下极限满足：\[
	\varliminf_{n\to\infty} x_n
	= \lim_{n\to\infty} \inf_{k\geq n} x_k
	= \lim_{n\to\infty} \inf\{x_n,x_{n+1},\dotsc\},
\]\[
	\varlimsup_{n\to\infty} x_n
	= \lim_{n\to\infty} \sup_{k\geq n} x_k
	= \lim_{n\to\infty} \sup\{x_n,x_{n+1},\dotsc\}.
\]
\end{theorem}
\cref{theorem:极限.上下极限的等价定义1}
也是数列的上下极限的一种等价定义.

由\cref{theorem:子列极限.数列收敛的充分必要条件} 立即可得如下结论.
\begin{corollary}
%@see: 《数学分析（第二版 下册）》（陈纪修） P10 定理9.2.2'
对于数列\(\{x_n\}\)，
总有\[
	\lim_{n\to\infty} x_n = a
	\iff
	\varliminf_{n\to\infty} x_n
	= \varlimsup_{n\to\infty} x_n
	= a.
\]
\end{corollary}

\begin{example}
%@see: 《数学分析（第二版 下册）》（陈纪修） P12 定理9.2.4 (1)
设\(\{a_n\},\{b_n\}\)都是数列.
证明：\begin{gather}
	\varliminf_{n\to\infty} a_n
	+ \varliminf_{n\to\infty} b_n
	\leq \varliminf_{n\to\infty} (a_n + b_n)
	\leq \varliminf_{n\to\infty} a_n
	+ \varlimsup_{n\to\infty} b_n. \\
	\varliminf_{n\to\infty} a_n
	+ \varlimsup_{n\to\infty} b_n
	\leq \varlimsup_{n\to\infty} (a_n + b_n)
	\leq \varlimsup_{n\to\infty} a_n
	+ \varlimsup_{n\to\infty} b_n.
\end{gather}
%TODO proof
%\cref{example:实数.确界的序}
\end{example}

\begin{example}
%@see: 《数学分析（第二版 下册）》（陈纪修） P12 定理9.2.4 (2)
设\(\{a_n\},\{b_n\}\)都是数列，
极限\(\lim_{n\to\infty} a_n\)存在，
则\begin{gather*}
	\varlimsup_{n\to\infty} (a_n + b_n)
	= \lim_{n\to\infty} a_n + \varlimsup_{n\to\infty} b_n, \\
	\varliminf_{n\to\infty} (a_n + b_n)
	= \lim_{n\to\infty} a_n + \varliminf_{n\to\infty} b_n.
\end{gather*}
%TODO proof
\end{example}

\begin{example}
%@see: 《数学分析（第二版 下册）》（陈纪修） P13 定理9.2.5 (1)
设\(\{a_n\},\{b_n\}\)都是数列.
若\(a_n,b_n\geq0\)，
则\begin{gather*}
	\varlimsup_{n\to\infty} (a_n b_n)
	\leq \varlimsup_{n\to\infty} a_n \cdot \varlimsup_{n\to\infty} b_n, \\
	\varliminf_{n\to\infty} (a_n b_n)
	\geq \varliminf_{n\to\infty} a_n \cdot \varliminf_{n\to\infty} b_n.
\end{gather*}
%TODO proof
\end{example}

\begin{example}
%@see: 《数学分析（第二版 下册）》（陈纪修） P13 定理9.2.5 (2)
设\(\{a_n\},\{b_n\}\)都是数列.
若\(\lim_{n\to\infty} a_n = a \in (0,+\infty)\)，
则\begin{gather*}
	\varlimsup_{n\to\infty} (a_n b_n)
	= \lim_{n\to\infty} a_n \cdot \varlimsup_{n\to\infty} b_n, \\
	\varliminf_{n\to\infty} (a_n b_n)
	= \lim_{n\to\infty} a_n \cdot \varliminf_{n\to\infty} b_n.
\end{gather*}
%TODO proof
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P31 习题1-2 4.
若\(\lim_{n\to\infty} u_n = a\)，
证明\(\lim_{n\to\infty} \abs{u_n} = \abs{a}\).
并举例说明：
即便数列\(\{\abs{x_n}\}\)有极限，
数列\(\{x_n\}\)也未必有极限.
\begin{proof}
因为\(\lim_{n\to\infty} u_n = a\)，
所以\[
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n\in\mathbb{N})
	[n>N \implies \abs{u_n-a}<\epsilon].
\]
由\hyperref[theorem:不等式.三角不等式2]{三角不等式}有
\(\abs{\abs{u_n}-\abs{a}}\leq\abs{u_n-a}\).
于是当\(n>N\)时，
也有\(\abs{\abs{u_n}-\abs{a}}<\epsilon\)成立，
从而有\(\lim_{n\to\infty} \abs{u_n} = \abs{a}\)成立.

根据\cref{example:极限.负1的次幂组成的数列发散}，
数列\(x_n = (-1)^{n+1}\)发散，
但\(\abs{x_n} = \abs{(-1)^{n+1}} = 1\)收敛，
说明如果数列\(\{\abs{x_n}\}\)有极限，
但数列\(\{x_n\}\)未必有极限.
\end{proof}
\end{example}
\begin{remark}
可以证明：当\(a=0\)时，成立\[
	\lim_{n\to\infty} \abs{u_n} = \abs{a}
	\iff
	\lim_{n\to\infty} u_n = a.
\]
这是因为，
只要有\(a=0\)且\(\lim_{n\to\infty} \abs{u_n} = 0\)，
就有\[
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n\in\mathbb{N})
	[n>N \implies \abs{u_n-0}=\abs{\abs{u_n}-0}<\epsilon],
\]
所以\(\lim_{n\to\infty} a_n = 0\).
\end{remark}

\subsection{波尔查诺--魏尔斯特拉斯定理}
现在我们来回答本节提出的第二个问题：
如果把单调性这一条件去掉，只考虑数列是有界的，
则只能得到下面这个稍弱的结论.
\begin{theorem}[波尔查诺--魏尔斯特拉斯定理]\label{theorem:极限.波尔查诺--魏尔斯特拉斯定理}
%@see: 《数学分析（第二版 上册）》（陈纪修） P63 定理2.4.5
任何有界数列至少有一个有限的子列极限.
\begin{proof}
设数列\(\{x_n\}\)有界，
那么存在实数\(a_1,b_1\)使得\((\forall n\in\mathbb{N}^+)[a_1 \leq x_n \leq b_1]\).
将闭区间\([a_1,b_1]\)等分为两个小区间\([a_1,c_1]\)和\([c_1,b_1]\)，
这里\(c_1=\frac{a_1+b_1}2\)，
则其中至少有一个含有数列\(\{x_n\}\)中的无穷多项，把它记为\([a_2,b_2]\).
再把闭区间\([a_2,b_2]\)等分为两个小区间\([a_2,c_2]\)和\([c_2,b_2]\)，
这里\(c_2=\frac{a_2+b_2}2\)，
同样其中至少有一个含有输了\(\{x_n\}\)中的无穷多项，把它记为\([a_3,b_3]\).
这样的步骤可以一直做下去，于是得到一个闭区间套\(\{[a_k,b_k]\}\)，
其中每一个闭区间\([a_k,b_k]\)中都含有数列\(\{x_n\}\)中的无穷多项.

根据\hyperref[definition:极限.闭区间套定理]{闭区间套定理}，
存在实数\(\xi\)满足\(\lim_{k\to\infty} a_k = \lim_{k\to\infty} b_k = \xi\).
现在证明数列\(\{x_n\}\)必有一个子列收敛于实数\(\xi\).

首先在\([a_1,b_1]\)中选取\(\{x_n\}\)中的某一项，记为\(x_{n_1}\).
然后在\([a_2,b_2]\)中选取位于\(x_{n_1}\)后的某一项，记为\(x_{n_2}\).
以此类推，我们就得到了数列\(\{x_n\}\)的一个子列\(\{x_{n_k}\}\)，
它满足\((\forall k\in\mathbb{N}^+)[a_k \leq x_{n_k} \leq b_k]\).
利用\hyperref[theorem:数列极限.夹逼准则]{夹逼准则}得到\(\lim_{k\to\infty} x_{n_k} = \xi\).
\end{proof}
\end{theorem}

当数列无界时，也有与\cref{theorem:极限.波尔查诺--魏尔斯特拉斯定理} 相对应的结论.
\begin{theorem}
%@see: 《数学分析（第二版 上册）》（陈纪修） P63 定理2.4.6
若\(\{x_n\}\)是一个无界数列，
则存在子列\(\{x_{n_k}\}\)，
使得\(\lim_{k\to\infty} x_{n_k} = \infty\).
\begin{proof}
由于\(\{x_n\}\)无界，
因此对于\(\forall M>0\)，
\(\{x_n\}\)中必定存在无穷多个\(x_n\)，
满足\(\abs{x_n}>M\)，
否则可以得出\(\{x_n\}\)有界的结论.

令\(M_1=1\)，则存在\(x_{n_1}\)，使得\(\abs{x_{n_1}}>1\).
再令\(M_2=1\)，因为在\(\{x_n\}\)中有无穷多项满足\(\abs{x_n}>2\)，
可以取到排在\(x_{n_1}\)之后的\(x_{n_2}\)，使得\(\abs{x_{n_2}}>2\).
以此类推，便可得到\(\{x_n\}\)的一个子列\(\{x_{n_k}\}\)，
满足\((\forall k\in\mathbb{N}^+)[\abs{x_{n_k}}>k]\).
由定义可知\(\lim_{k\to\infty} x_{n_k} = \infty\).
\end{proof}
\end{theorem}

\subsection{柯西极限存在准则}
前面已经指出，从数列\(\{x_n\}\)本身的特征直接判断它是否收敛是一个很有意义的重要问题.
但是\hyperref[theorem:极限.数列的单调有界定理]{单调有界定理}只是给出了判断数列收敛的一个充分不必要条件.
但是许多收敛数列并非单调的，所以我们有必要从数列本身出发来寻找其收敛的充分必要条件.

\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P64 定义2.4.3
如果数列\(\{x_n\}\)满足\[
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n,m\in\mathbb{N})
	[n > N \land m > N \implies \abs{x_n - x_m} < \epsilon],
\]
则称“数列\(\{x_n\}\)是一个\DefineConcept{基本数列}”.
\end{definition}

\begin{theorem}[柯西极限存在准则]\label{theorem:极限.数列的柯西极限存在准则}
%@see: 《高等数学（第六版 上册）》 P55 柯西极限存在准则
%@see: 《数学分析（第二版 上册）》（陈纪修） P65 定理2.4.7
数列\(\{x_n\}\)收敛的充分必要条件是：
\(\{x_n\}\)是基本数列.
\begin{proof}
必要性.
设\(\lim_{n\to\infty} x_n = a\).
由数列极限的定义有\[
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n,m\in\mathbb{N})
	\left[\def\arraystretch{1.2}
		\begin{array}{c}
			n > N \implies \abs{x_n - a} < \frac\epsilon2 \\
			m > N \implies \abs{x_m - a} < \frac\epsilon2
		\end{array}
	\right],
\]
于是\[
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n,m\in\mathbb{N})
	[
		n > N \land m > N
		\implies
		\abs{x_m - x_n}
		% = \abs{(x_m - a) - (x_n - a)}
		\leq \abs{x_m - a} + \abs{x_n - a}
		< \epsilon
	].
\]

充分性.
取\(\epsilon_0 = 1\)，
因为\(\{x_n\}\)是基本数列，
所以\[
	(\exists N_0\in\mathbb{N})
	(\forall n\in\mathbb{N})
	[
		n > N_0
		\implies
		\abs{x_n - x_{N_0+1}} < 1.
	]
\]
令\(M = \max\{\abs{x_1},\abs{x_2},\dotsc,\abs{x_{N_0}},\abs{x_{N_0+1}}+1\}\)，
则\[
	(\forall n\in\mathbb{N})
	[\abs{x_n} \leq M],
\]
这就说明基本数列必定有界.
那么由\hyperref[theorem:极限.波尔查诺--魏尔斯特拉斯定理]{波尔查诺--魏尔斯特拉斯定理}，
在数列\(\{x_n\}\)中必有收敛子列\(\{x_{n_k}\}\)，使得\[
	\lim_{k\to\infty} x_{n_k} = \xi.
\]
因为\(\{x_n\}\)是基本数列，
所以\[
	(\forall\epsilon>0)
	(\exists N\in\mathbb{N})
	(\forall n,m\in\mathbb{N})
	\left[
		n > N \land m > N
		\implies
		\abs{x_n - x_m} < \frac\epsilon2
	\right].
\]
在上式中取\(x_m = x_{n_k}\)，其中\(k\)充分大，满足\(n_k > N\)，
并且令\(k\to\infty\)，
于是由\cref{theorem:极限.收敛数列的保序性2} 得到\[
	\abs{x_n - \xi}
	\leq \frac\epsilon2
	< \epsilon,
\]
这就说明\(\{x_n\}\)收敛.
\end{proof}
\end{theorem}

\hyperref[theorem:极限.数列的柯西极限存在准则]{柯西极限存在准则}表明，
由实数构成的基本数列\(\{x_n\}\)必存在实数极限，
这一性质称为“实数系的\DefineConcept{完备性}”.
值得注意的是有理数集\(\mathbb{Q}\)不具有完备性.
例如，数列\(\left\{\left(1+\frac1n\right)^n\right\}\)是由有理数构成的基本数列，
但是它的极限\(e\)并不是有理数（我们将在以后给出严格证明）.%TODO: 证明e不是有理数

\begin{example}\label{example:收敛准则.压缩映射原理1}
设数列\(\{x_n\}\)从某一项开始满足压缩性条件\[
	\abs{x_{n+1} - a}
	\leq k \abs{x_n - a},
	\quad 0<k<1,
\]
证明：\(\lim_{n\to\infty} x_n = a\).
%TODO proof
\end{example}

\begin{example}\label{example:收敛准则.压缩映射原理2}
%@see: 《数学分析（第二版 上册）》（陈纪修） P66 例2.4.14
设数列\(\{x_n\}\)满足压缩性条件\[
	\abs{x_{n+1} - x_n}
	\leq k \abs{x_n - x_{n-1}},
	\quad 0<k<1, n=2,3,\dotsc,
\]
证明：\(\{x_n\}\)收敛.
\begin{proof}
对于\(\forall n\in\mathbb{N}^+\)，有\[
	\abs{x_{n+1} - x_n}
	\leq k \abs{x_n - x_{n-1}}
	\leq k^2 \abs{x_{n-1} - x_{n-2}}
	\leq \dotsb
	\leq k^{n-1} \abs{x_2 - x_1}.
\]
设\(m > n\)，
则\begin{align*}
	\abs{x_m - x_n}
	&\leq \abs{x_m - x_{m-1}}
	+ \abs{x_{m-1} - x_{m-2}}
	+ \dotsb + \abs{x_{n+1} - x_n} \\
	&\leq k^{m-2} \abs{x_2 - x_1}
	+ k^{m-3} \abs{x_2 - x_1}
	+ \dotsb + k^{n-1} \abs{x_2 - x_1} \\
	&< \frac{k^{n-1}}{1-k} \abs{x_2 - x_1},
\end{align*}
因为\(0<k<1\)，
所以\(\lim_{n\to\infty} \frac{k^{n-1}}{1-k} \abs{x_2 - x_1} = 0\)，
于是\(\{x_n\}\)是基本数列，必定收敛.
\end{proof}
\end{example}
