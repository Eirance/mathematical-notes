\section{定积分的概念与性质}
\subsection{定积分的概念}
\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P275 定义7.1.1
设函数\(f\colon[a,b]\to\mathbb{R}\)在闭区间\([a,b]\)上有界.
在\([a,b]\)中任意插入若干个分点\[
	a=x_0 < x_1 < x_2 < \dotsb < x_{n-1} < x_n = b,
\]
把区间\([a,b]\)分成\(n\)个小区间\[
	[x_0,x_1],[x_1,x_2],\dotsc,[x_{n-1},x_n],
\]
各个小区间的长度依次为\[
	\increment x_1=x_1-x_0,
	\increment x_2=x_2-x_1,
	\dotsc,
	\increment x_n=x_n-x_{n-1},
\]
在每个小区间\([x_{i-1},x_i]\)上任取一点\(\xi_i\ (x_{i-1} \leq \xi_i \leq x_i)\)，
作函数值\(f(\xi_i)\)与小区间长度\(\increment x_i\)的乘积
\(f(\xi_i)\increment x_i\ (i=1,2,\dotsc,n)\)，
并求和\[
	S = \sum_{i=1}^n f(\xi_i) \increment x_i,
\]
和\(S\)通常称为\DefineConcept{积分和}.
记\(\lambda=\max\{\increment x_1,\increment x_2,\dotsc,\increment x_n\}\).
如果不论对\([a,b]\)怎么划分，
也不论小区间\([x_{i-1},x_i]\)上点\(\xi_i\)怎样选取，
只要当\(\lambda\to0\)时，
和\(S\)总趋于确定的极限\(I\)，
那么称这个极限\(I\)为
“函数\(f(x)\)在区间\([a,b]\)上的\DefineConcept{定积分}”，
记作\(\int_a^b f(x) \dd{x}\)，
即\begin{equation}
	\int_a^b f(x) \dd{x}
	\defeq
	\lim_{\lambda\to0} \sum_{i=1}^n f(\xi_i)\increment x_i,
\end{equation}
其中\(f(x)\)称为\DefineConcept{被积函数}，
\(f(x)\dd{x}\)称为\DefineConcept{被积表达式}，
\(x\)称为\DefineConcept{积分变量}，
\(a\)称为\DefineConcept{积分下限}，
\(b\)称为\DefineConcept{积分上限}，
\([a,b]\)称为\DefineConcept{积分区间}.
我们称“函数\(f\)在\([a,b]\)上\DefineConcept{可积}（integrable）”.
\end{definition}
以上积分定义又称为\DefineConcept{黎曼积分}.

注意：
当和\(\sum_{i=1}^n f(\xi_i) \increment x_i\)的极限
\(\lim_{\lambda\to0} \sum_{i=1}^n f(\xi_i) \increment x_i\)存在时，
其极限\(I\)仅与被积函数\(f(x)\)及积分区间\([a,b]\)有关.
如果既不改变被积函数\(f\)，也不改变积分区间\([a,b]\)，
而只把积分变量\(x\)改写成其他字母，则和的极限\(I\)不变，也就是定积分的值不变，
即\[
	\int_a^b f(x) \dd{x}
	= \int_a^b f(t) \dd{t}
	= \int_a^b f(u) \dd{u}.
\]
换句话说，定积分的值只与被积函数及积分区间有关，而与积分变量的记法无关.

\begin{definition}\label{definition:函数族.黎曼可积函数族}
由闭区间\([a,b]\)上全部的黎曼可积函数组成的集合，
称作\DefineConcept{黎曼可积函数族}\footnote{%
不作特别强调时，可以将其简称为\DefineConcept{可积函数族}.%
}，记作\(R[a,b]\).
\end{definition}

\begin{example}[用定义法证明定积分不存在]
根据定积分定义判定定积分不存在的方法有两种：一种是证明存在一种分法使得积分和极限不存在；另一种是证明存在两种分法使得两个极限不相等.
\end{example}

\begin{theorem}[函数可积的充分条件I]
设\(f(x)\)在区间\([a,b]\)上连续，则\(f(x)\)在\([a,b]\)上可积.
\end{theorem}

\begin{theorem}[函数可积的充分条件II]
设\(f(x)\)在区间\([a,b]\)上有界，则只有有限个间断点，则\(f(x)\)在\([a,b]\)上可积.
\end{theorem}

\begin{remark}
可以证明，
一个闭区间\([a,b]\)上的有界函数\(f\)是（黎曼）可积的，
当且仅当\(f\)的间断点构成的集合是零测度的.
%TODO
\end{remark}

\begin{example}
利用定义计算定积分\(\int_0^1 x^2 \dd{x}\).
\begin{solution}
因为被积函数\(f(x) = x^2\)在积分区间\([0,1]\)上连续，而连续函数是可积的，
所以积分与区间\([0,1]\)的分法及点\(\xi_i\)的取法无关.
因此，为了便于计算，不妨把区间\([0,1]\)分成\(n\)等份，
分点为\(x_i = i/n,\,i=1,2,\dotsc,n-1\)；
这样，每个小区间\([x_{i-1},x_i]\)的长度\(\increment x_i = 1/n,\,i=1,2,\dotsc,n\)；
取\(\xi_i=x_i,\,i=1,2,\dotsc,n\).
于是积分和为\begin{align*}
	\sum_{i=1}^n f(\xi_i) \increment x_i
	&= \sum_{i=1}^n \xi_i^2 \increment x_i
	= \sum_{i=1}^n \left(\frac{i}{n}\right)^2 \frac{1}{n}
	= \frac{1}{n^3} \sum_{i=1}^n i^2 \\
	&= \frac{1}{n^3} \cdot \frac{1}{6} n(n+1)(2n+1) \\
	&= \frac{1}{6} \left(1+\frac{1}{n}\right) \left(2+\frac{1}{n}\right).
\end{align*}
当\(\lambda\to0\)时，\(n\to\infty\)，那么有\[
	\int_0^1 x^2 \dd{x}
	= \lim_{\lambda\to0} \sum_{i=1}^n f(\xi_i) \increment x_i
	= \lim_{n\to\infty}
		\frac{1}{6} \left(1+\frac{1}{n}\right) \left(2+\frac{1}{n}\right)
	= \frac{1}{3}.
\]
\end{solution}
\end{example}

\subsection{定积分的几何意义}
在区间\([a,b]\)上\(f(x) \geq 0\)时，
定积分\(\int_a^b f(x) \dd{x}\)在几何上表示
由曲线\(y=f(x)\)、直线\(x=a\)、直线\(x=b\)与\(x\)轴所围成的曲边梯形的面积.
在区间\([a,b]\)上\(f(x) \leq 0\)时，
由曲线\(y=f(x)\)、直线\(x=a\)、直线\(x=b\)与\(x\)轴所围成的曲边梯形在\(x\)轴的下方，
定积分\(\int_a^b f(x) \dd{x}\)在几何上表示上述曲边梯形的面积的负值.

实际上，对于任意可积函数\(f\colon \mathbb{R} \to \mathbb{R}\)，
定积分\(\int_a^b f(x) \dd{x}\)还可以理解为非空集\(R[a,b]\)上的泛函.

\subsection{定积分的性质}
\begin{definition}
为了以后计算及应用方便起见，对定积分作以下两点补充规定：
\begin{enumerate}
\item 定积分上下限相等时，定积分为零，即
\begin{equation}\label{equation:定积分.上下限相等的定积分为零}
    a=b \implies \int_a^b f(x) \dd{x}=0.
\end{equation}
\item 交换定积分的上下限，定积分的绝对值不变而符号相反，即
\begin{equation}\label{equation:定积分.交换上下限改变定积分的符号}
\int_a^b f(x) \dd{x}
= - \int_b^a f(x) \dd{x}.
\end{equation}
\end{enumerate}
\end{definition}

下面讨论定积分的性质.
下列各性质中积分上下限的大小，
如不特别指明，均不加限制；
并假定各性质中所列出的定积分都是存在的.
\begin{property}\label{theorem:定积分.定积分性质1}
%@see: 《高等数学（第六版 上册）》 P231 性质1
\(\int_a^b [f(x) \pm g(x)] \dd{x}
= \int_a^b f(x) \dd{x} \pm \int_a^b g(x) \dd{x}\).
\begin{proof}
显然有\begin{align*}
	\int_a^b [f(x) \pm g(x)] \dd{x}
	&= \lim_{\lambda\to0}
		\sum_{i=1}^n [f(\xi_i) \pm g(\xi_i)] \increment x_i \\
	&= \lim_{\lambda\to0}
		\sum_{i=1}^n f(\xi_i) \increment x_i
		\pm
		\lim_{\lambda\to0}
		\sum_{i=1}^n g(\xi_i) \increment x_i \\
	&= \int_a^b f(x) \dd{x} \pm \int_a^b g(x) \dd{x}.
	\qedhere
\end{align*}
\end{proof}
\end{property}
上述性质对任意有限个函数都是成立的.

\begin{property}\label{theorem:定积分.定积分性质2}
%@see: 《高等数学（第六版 上册）》 P231 性质2
对于任意实数\(k\)，
总有\(\int_a^b k f(x) \dd{x}
=k\int_a^b f(x) \dd{x}\).
\end{property}

\begin{corollary}\label{theorem:定积分.定积分性质2推论1}
\(\int_a^b 0 \dd{x} = 0\).
\end{corollary}

\begin{property}\label{theorem:定积分.定积分性质3}
%@see: 《高等数学（第六版 上册）》 P231 性质3
\(\int_a^b f(x) \dd{x}
= \int_a^c f(x) \dd{x}
+ \int_c^b f(x) \dd{x}\).
\end{property}
上述性质表明定积分对于积分区间具有“可加性”.

%\begin{example}
%设连续函数\(f(x)\)满足\(f(x+2)-f(x)=x\)，
%且\(\int_0^2 f(x) \dd{x} = 0\)，
%求\(\int_1^3 f(x) \dd{x}\).
%\begin{solution}
%由\cref{theorem:定积分.定积分性质3} 有，\[
%\int_1^3 f(x) \dd{x}
%= \int_1^2 f(x) \dd{x}
%+ \int_2^3 f(x) \dd{x}.
%\]而\[
%\int_2^3 f(x) \dd{x}
%\xlongequal{x=t+2} \int_0^1 f(t+2) \dd{t} \\
%= \int_0^1 [f(t) + t] \dd{t} \\
%= \int_0^1 f(t) \dd{t} + \frac{1}{2},
%\]因此\[
%\int_1^3 f(x) \dd{x}
%= \int_1^2 f(x) \dd{x}
%+ \int_0^1 f(t) \dd{t} + \frac{1}{2}
%= \int_0^2 f(x) \dd{x} + \frac{1}{2}
%= \frac{1}{2}.
%\]
%\end{solution}
%\end{example}

\begin{property}\label{theorem:定积分.定积分性质4}
%@see: 《高等数学（第六版 上册）》 P232 性质4
\(\int_a^b 1 \dd{x}
= \int_a^b \dd{x}
= b-a\).
\end{property}

\begin{property}\label{theorem:定积分.定积分性质5}
%@see: 《高等数学（第六版 上册）》 P232 性质5
如果在区间\([a,b]\)上，\(f(x) \geq 0\)，则\(\int_a^b f(x) \dd{x} \geq 0\).
\begin{proof}
因为\(f(x) \geq 0\)，
所以在区间\([a,b]\)上任取\(n\)个分点\(\AutoTuple{x}{n}\)使之满足\[
	a = x_0 \leq x_1 \leq x_2 \leq \dotsb \leq x_n \leq x_{n+1} = b,
\]
在各个小区间上任取一点\(\xi_i\in[x_i,x_{i+1}]\ (i=0,1,2,\dotsc,n)\)，
就有\[
	f(\xi_i)\geq0.
\]

又因为小区间\([x_i,x_{i+1}]\)的长度
\(\increment x_i = x_{i+1}-x_i \geq 0\ (i=0,1,2,\dotsc,n)\)，
因此\[
	\sum_{i=0}^n f(\xi_i) \increment x_i \geq 0,
\]
令\(\lambda = \max\{\increment x_0, \increment x_1, \dotsc, \increment x_n\}\)，
则由极限的保号性可得\[
	\int_a^b f(x) \dd{x}
	= \lim_{\lambda\to0} \sum_{i=0}^n f(\xi_i) \increment x_i \geq 0.
	\qedhere
\]
\end{proof}
\end{property}
上述性质表明定积分具有“保号性”.

\begin{example}
比较\(\int_0^1 \abs{\ln t} \ln^n(1+t) \dd{t}\)
与\(\int_0^1 t^n \abs{\ln t} \dd{t}\)的大小（\(n=1,2,\dotsc\)）.
\begin{solution}
直接相减得
\begin{align*}
	&\hspace{-20pt}
	\int_0^1 \abs{\ln t} \ln^n(1+t) \dd{t} - \int_0^1 t^n \abs{\ln t} \dd{t} \\
	&= \int_0^1 [\abs{\ln t} \ln^n(1+t) - t^n \abs{\ln t}] \dd{t} \\
	&= \int_0^1 \abs{\ln t} [\ln^n(1+t) - t^n] \dd{t}.
\end{align*}
注意到\(\ln t\)的自然定义域为\(t > 0\).
当\(0 < t \leq 1\)时，
\(\ln(1+t) < t\)，
\(\ln^n(1+t) < t^n\)，
\[
	\abs{\ln t} [\ln^n(1+t) - t^n] < 0,
\]\[
	\int_0^1 \abs{\ln t} [\ln^n(1+t) - t^n] \dd{t} < 0,
\]\[
	\int_0^1 \abs{\ln t} \ln^n(1+t) \dd{t} < \int_0^1 t^n \abs{\ln t} \dd{t}.
\]
\end{solution}
\end{example}

\begin{corollary}\label{theorem:定积分.定积分性质5推论1}
%@see: 《高等数学（第六版 上册）》 P232 推论1
如果在区间\([a,b]\)上，\(f(x) \leq g(x)\)，则\[
	\int_a^b f(x) \dd{x} \leq \int_a^b g(x) \dd{x}.
\]
\begin{proof}
令\(\phi(x) = g(x) - f(x)\).
因为\(f(x) \leq g(x)\)，所以\(\phi(x) \geq 0\).
由\cref{theorem:定积分.定积分性质5} 得\[
	\int_a^b \phi(x) \dd{x} \geq 0,
\]
又由\cref{theorem:定积分.定积分性质1} 得\[
	\int_a^b \phi(x) \dd{x}
	= \int_a^b [g(x) - f(x)] \dd{x}
	= \int_a^b g(x) \dd{x} - \int_a^b f(x) \dd{x},
\]
所以\[
	\int_a^b g(x) \dd{x} - \int_a^b f(x) \dd{x} \geq 0,
\]
从而有\[
	\int_a^b g(x) \dd{x} \geq \int_a^b f(x) \dd{x}.
	\qedhere
\]
\end{proof}
\end{corollary}

\begin{corollary}\label{theorem:定积分.定积分性质5推论2}
%@see: 《高等数学（第六版 上册）》 P233 推论2
当\(a<b\)时，\(\abs{\int_a^b f(x) \dd{x}} \leq \int_a^b \abs{f(x)} \dd{x}\).
\begin{proof}
因为\[
	-\abs{f(x)} \leq f(x) \leq \abs{f(x)},
\]
那么由\cref{theorem:定积分.定积分性质5推论1,theorem:定积分.定积分性质2} 可得\[
	-\int_a^b \abs{f(x)} \dd{x}
	\leq
	\int_a^b f(x) \dd{x}
	\leq
	\int_a^b \abs{f(x)} \dd{x},
\]
即\[
	\abs{\int_a^b f(x) \dd{x}} \leq \int_a^b \abs{f(x)} \dd{x}.
	\qedhere
\]
\end{proof}
\end{corollary}

\begin{corollary}\label{theorem:定积分.定积分性质5推论3}
设函数\(f\)是区间\([a,b]\)上的非负的可积函数，
则\[
	\int_a^b f(x) \dd{x} \geq 0.
\]
\begin{proof}
因为\(f(x)\geq0\ (a \leq x \leq b)\)，
根据\cref{theorem:定积分.定积分性质5推论1,theorem:定积分.定积分性质2推论1}，
总有\[
	0 = \int_a^b 0 \dd{x} \leq \int_a^b f(x) \dd{x}.
	\qedhere
\]
\end{proof}
\end{corollary}

\begin{corollary}\label{theorem:定积分.定积分性质5推论4}
设函数\(f\)是区间\([a,b]\)上的非负的可积函数，
那么对于\(\forall c,d\in(a,b)\)，
有\[
	c<d
	\implies
	\int_a^c f(x) \dd{x} \leq \int_a^d f(x) \dd{x}.
\]
\begin{proof}
根据\cref{theorem:定积分.定积分性质5推论3}，
有\[
	\int_c^d f(x) \dd{x} \geq 0.
\]
再根据\cref{theorem:定积分.定积分性质3}，
有\[
	\int_a^c f(x) \dd{x}
	+ \int_c^d f(x) \dd{x}
	= \int_a^d f(x) \dd{x}.
\]
因此\[
	\int_a^c f(x) \dd{x}
	\leq
	\int_a^d f(x) \dd{x}.
	\qedhere
\]
\end{proof}
\end{corollary}

\begin{property}\label{theorem:定积分.定积分性质6}
%@see: 《高等数学（第六版 上册）》 P233 性质6
设\(M\)及\(m\)分别是函数\(f(x)\)在区间\([a,b]\)上的最大值及最小值，
则\[
	m(b-a) \leq \int_a^b f(x) \dd{x} \leq M(b-a).
\]
\begin{proof}
因为\(m \leq f(x) \leq M\)，
所以由上述推论，
得\[
	m(b-a)
	= \int_a^b m \dd{x}
	\leq \int_a^b f(x) \dd{x}
	\leq \int_a^b M \dd{x}
	= M(b-a).
	\qedhere
\]
\end{proof}
\end{property}
上述性质说明，由被积函数在积分区间上的最大值及最小值，可以估计积分值的大致范围.

\subsection{积分中值定理}
\begin{theorem}[定积分中值定理]\label{theorem:定积分.积分中值定理0}
设函数\(f(x)\)在积分区间\([a,b]\)上连续，
则\(\exists\xi\in[a,b]\)，
使\[
	\int_a^b f(x) \dd{x} = (b-a) f(\xi)
\]成立.
\rm
这个公式称为\DefineConcept{积分中值公式}.
\end{theorem}
显然，积分中值公式不论\(a<b\)或\(a>b\)都是成立的.

按积分中值公式所得\[
	f(\xi) = \frac{1}{b-a} \int_a^b f(x) \dd{x}
\]
称为函数\(f(x)\)在区间\([a,b]\)上的\DefineConcept{平均值}.

\begin{theorem}[积分第一中值定理]\label{theorem:定积分.积分中值定理1}
若\(f,g \in R[a,b]\)，
且\(g(x) \gtrless 0\ (a \leq x \leq b)\)，
那么\(\exists\mu\in\left[
	\inf_{a \leq x \leq b} f(x),
	\sup_{a \leq x \leq b} f(x)
\right]\)，
使得\[
	\int_a^b f(x) g(x) \dd{x} = \mu \int_a^b g(x) \dd{x}.
\]
\end{theorem}

\begin{corollary}\label{theorem:定积分.积分中值定理1推论1}
若\(f \in C[a,b]\)，
\(g \in R[a,b]\)，
\(g(x) \gtrless 0\)，
那么\(\exists\xi\in[a,b]\)，
使得\[
	\int_a^b f(x) g(x) \dd{x}
	= f(\xi) \int_a^b g(x) \dd{x}.
\]
\end{corollary}

\begin{theorem}[积分第二中值定理]\label{theorem:定积分.积分中值定理2}
设\(f,g \in R[a,b]\).\begin{enumerate}
\item 若\(f\)在\((a,b)\)上单调，则\(\exists \xi \in [a,b]\)使得\[
\int_a^b f(x) g(x) \dd{x} = f(a^+) \int_a^{\xi} g(x) \dd{x} + f(b^-) \int_{\xi}^b g(x) \dd{x}.
\]
\item 若\(f\)在\((a,b)\)上单调递减且\(f(x) \geq 0\)，则\(\exists \xi \in [a,b]\)使得\[
\int_a^b f(x) g(x) \dd{x} = f(a^+) \int_a^{\xi} g(x) \dd{x};
\]
\item 若\(f\)在\((a,b)\)上单调递增且\(f(x) \geq 0\)，则\(\exists \xi \in [a,b]\)使得\[
\int_a^b f(x) g(x) \dd{x} = f(b^-) \int_{\xi}^b g(x) \dd{x};
\]
\end{enumerate}
\end{theorem}

\begin{example}
设\(f \in R[a,b]\).
证明：等式\[
\int_a^b f^2(x) \dd{x} = 0
\]成立的充分必要条件是“对于函数\(f(x)\)在\([a,b]\)上的所有连续点都有\(f(x)=0\)”.
\end{example}
